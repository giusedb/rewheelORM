!function(t,n,e){"use strict";function i(){this.handlers=[],this.strHandlers={}}function o(){var t={},e={},i=0;this.on=function(n,o){n in t||(t[n]=new Array);var r=i++;return t[n].push(o),e[r]=o,r},this.emit=function(n){if(n in t){var e=Array.prototype.slice.call(arguments,1);t[n].forEach(function(t){t.apply(null,e)})}},this.unbind=function(i){var o=0;if(i in e){var r=e[i+""];n(t).each(function(t,n){var e=[];for(var i in t)t[i]===r&&(e.push(i),o++);e.reverse().forEach(function(n){t.splice(n,1)})})}return delete e[i],o}}function r(t,n){this.getLogin=n,this.events=new o,this.$POST=m.bind(this),this.options={endPoint:t},this.on=this.events.on.bind(this)}function s(){var t=!1;this.touch=function(){t=!0},this.touched=function(){var n=t;return t=!1,n}}function a(t,e,i){if(!e)var e=[];var o=[];this.ask=function(i,r){n(e).contains(i)||(o.push(i),r||e.push(i),t.touch())},this.getAskedIndex=function(){return e},this.missings=function(){return n(o.splice(0,o.length)).unique().toArray()}}function c(t,e,i,o,r){var c=new s,u={},f={},d={},h={},p={};this.mainIndex=u,this.foreignKeys=f,this.m2m=d,this.m2mIndex=h,this.permissions=p,t.on("model-definition",function(t){var e=r.getIndexFor(t.name,"id");u[t.name]=new a(c,e,"mainIndex."+t.name),p[t.name]=new a(c,null,"permissions."+t.name),n(t.references).each(function(n){var e=t.name+"_"+n.id;f[e]=new a(c,r.getIndexFor(n.to,"id"),n.to+".id foreignKeys."+e)}),n(t.referencedBy).each(function(t){var n=t.by+"."+t.id;f[n]=new a(c,r.getIndexFor(t.by,t.id),t.by+"."+t.id+" foreignKeys."+n)}),n(t.manyToMany).each(function(t){t.indexName in d||(d[t.indexName]=[new a(c,null,"m2m."+t.indexName+"[0]"),new a(c,null,"m2m."+t.indexName+"[1]")]),t.indexName in h||(h[t.indexName]=new l(t,d[t.indexName]))})});var m=function(t,n,i,r){o.$post((n?v.reverse("/",t):t)+"s/list",{collection:i},function(n){o.gotData(n,r),delete e[t]})},g=function(t,i,o,r){n(i).each(d[t][o].ask.bind(d[t][o])),i=d[t][o].missings(),i.length?(e[t]=1,m(t,o,i,r)):r&&r()};this.getM2M=g;var y=function(){if(c.touched()){if(n(e).values().sum())return void c.touch();var t=!1;n(d).each(function(e,i){n(e).each(function(e,r){var s=e.missings();if(s=n(s).filter(Boolean).map(function(t){return parseInt(t)}).toArray(),s.length){var a=h[i],c=a["get"+(1-r)].bind(a);t=!0,m(i,r,s,function(t){var e=s.map(c);if(e.length){var a=i.split("/")[1-r];o.describe(a,function(){n(e).flatten().unique().each(function(t){u[a].ask(t,!0)})})}})}})}),n(u).each(function(e,r){var s=e.missings();if(s.length){t=!0;r in i?i[r].keys():n();o.fetch(r,{id:s},null,v.noop)}}),n(f).map(function(t,n){return[n,t.missings()]}).filter(function(t){return t[1].length}).each(function(n){t=!0;var e=n[1],i=n[0],r=i.split("."),s=r[0],a=r[1],c={};c[a]=e,o.fetch(s,c)}),n(n(p).map(function(t,n){return[n,t.missings()]}).filter(function(t){return t[1].length}).toObject()).each(function(i,r){t=!0,i.length&&(e[r]=1,o.$post(r+"/my_perms",{ids:n(i).unique().toArray()},function(t){o.gotPermissions(t.PERMISSIONS),delete e[r]}))})}};setInterval(y,50)}function u(){var t={},e={},i={},o=function(t,e,i){var o=[];if(i)for(var r in t)for(var s in e)o.push(n([t[r],e[s]]).flatten().toArray());else for(var r in t)for(var s in e)o.push([t[r],e[s]]);return o},r=function(t){for(var n=!1,e=t[0],i=1;i<t.length;++i)e=o(e,t[i],n),n=!0;return e},s=function(t){var e=r(n(t).values().toArray()),i=n(t).keys().toArray();return e.map(function(t){var n={};return i.forEach(function(e,i){n[e]=t[i]}),n})},a=function(t,e,i){var o=t.modelName,r=this.getIndexFor,s=(n(e).map(function(t,n){return[n,o+"."+n]}).toObject(),n(e).keys().map(function(t){return[t,r(o,t)]}).toObject());for(var a in e){var c=n(e[a]).difference(s[a]).toArray();if(c.length){var u=n([[a,c]]).toObject();return i||Array.prototype.push.apply(s[a],c),u}return null}},c=function(t,e){t.name in i||(i[t.name]=[]);var o=i[t.name],r=n(e).size();o.filter(v.makeFilter(t,e," && ",!0)).filter(function(t){n(t).size()>r})};this.filter=function(o,r){var u=o.modelName,l=n(r).size();switch(l){case 0:var f=t[u];return t[u]=!0,u in e&&delete e[u],u in i&&delete i[u],f?null:{};case 1:var d=a.call(this,o,r);return c.call(this,o,r),d}var h=this,p=n(r).keys().some(function(t){var n={};return n[t]=r[t],null==a.call(h,o,n,!0)});if(p)return null;u in i||(i[u]=[]);var m=s(r),g=i[u].filter(v.makeFilter(o,r," || ",!0));if(g.length){var y=[];for(var w in g)y.push.apply(y,m.filter(v.makeFilter(o,g[w]," && ",!0)));var b=n(m).difference(y).toArray()}else var b=m;if(b.length){i[u].push.apply(i[u],b);var b=n(r).keys().map(function(t){var e=n(b).pluck(t).unique().toArray();return[t,e.length?e:r[t]]}).toObject();return c(o,b),b}return null},this.getIndexFor=function(t,n){var i=t+"."+n;return i in e||(e[i]=[]),e[i]}}function l(t,e){var i=[];this.add=i.push.bind(i),this.add=function(t){console.log("adding "+t),n(i).find(t)||i.push(t)},this.get0=function(t){return e[1].ask(t),n(i).filter(function(n){return n[0]===t}).pluck("1").toArray()},this.get1=function(t){return e[0].ask(t),n(i).filter(function(n){return n[1]===t}).pluck("0").toArray()},this["get"+v.capitalize(t.indexName.split("/")[1])]=this.get1,this["get"+v.capitalize(t.indexName.split("/")[0])]=this.get0,this.del=function(t){for(var n=i.length,e=null,o=0;o<n;o++)if(i[o][0]===t[0]&&i[o][1]===t[1]){e=o;break}e&&i.splice(o,1),console.log("deleting ",t)}}function f(t,e,i,o){var r=Array.prototype.slice.call(arguments,4),s={};n(r).each(function(n){t.orm.on(n,function(){s={}})});var a={get:function(){return this.id in s||(s[this.id]=i.call(this)),s[this.id]}};o&&(a.set=function(t){t!==s[this.id]&&(o.call(this,t),this.id in s&&delete s[this.id])}),Object.defineProperty(t,e,a)}function d(t){this.resource=t._resource,this.formIdx=t.formIdx,this.fields=t.errors}function h(t,n){this.$orm=new g(new v.reWheelConnection(t,n),this),this.on=this.$orm.on.bind(this.$orm),this.emit=this.$orm.emit.bind(this.$orm),this.unbind=this.$orm.unbind.bind(this.$orm),this.addModelHandler=this.$orm.addModelHandler.bind(this.$orm),this.addPersistentAttributes=this.$orm.addPersistentAttributes.bind(this.$orm),this.utils=v}i.prototype.addHandler=function(t){var n=v.hash(t.toString());n in this.strHandlers||(this.strHandlers[n]=t,this.handlers.push(t))},i.prototype.handle=function(){var t=Array.prototype.slice.call(arguments,0);this.handlers.forEach(function(n){n.apply(null,t)})},i.prototype.handleBy=function(){var t=Array.prototype.slice.call(arguments,1),n=arguments[0];this.handlers.forEach(function(e){e.apply(n,t)})};var p=0,m=function(t,n,e,i,o){var r={accepts:"application/json",url:t,data:JSON.stringify(n),dataType:"json",success:e,error:i,method:"POST",contentType:"application/json"};return o&&(r.headers=o,r.crossDomain=!0),$.ajax(r)};r.prototype.status=function(t,n){if("lastRWTStatus"in localStorage&&!n){try{var e=JSON.parse(localStorage.lastRWTStatus);for(var i in e)this.options[i]=e[i]}catch(n){return this.status(t,!0)}return t&&t(e)}if(this._status_calling){var o=this;return setTimeout(function(){o.status(t)},50)}if(!this.options||!this.options.timestamp){this._status_calling=!0;var o=this;return this.$post("api/status",null,function(n){localStorage.lastRWTStatus=JSON.stringify(n),o._status_calling=!1;for(var e in n)o.options[e]=n[e];if(!n.user_id&&o.getLogin){var i=o.getLogin();i.constructor===Object&&o.login(i.username,i.password).then(function(n){for(var e in n)o.options[e]=n[e];localStorage.lastRWTStatus=JSON.stringify(n),t&&t(n)})}else t&&t(o.options)})}t&&t(this.options)},r.prototype.$post=function(t,n,e){var i=this;if(this.options&&this.options.token&&(n||(n={})),this.options.token){({token:this.options.token,application:this.options.application})}else;var o=v.xdr(this.options.endPoint+t,n,this.options.application,this.options.token).then(function(o){i.events.emit("http-response",o.responseText,o.status,t,n),i.events.emit("http-response-"+o.status,o.responseText,t,n),o.responseData&&i.events.emit("http-response-"+o.status+"-json",o.responseData,t,n),e&&e(o.responseData||o.responseText)},function(e){e.responseData?(i.events.emit("error-json",e.responseData,e.status,t,n,e),i.events.emit("error-json-"+e.status,e.responseData,t,n,e)):(i.events.emit("error-http",e.responseText,e.status,t,n,e),i.events.emit("error-http-"+e.status,e.responseText,t,n,e))});return o},r.prototype.login=function(t,n){var e=this.options.endPoint+"api/login",i=this;return new Promise(function(o,r){v.xdr(e,{username:t,password:n},null,i.options.token,!0).then(function(t){var n=t.responseData;for(var e in n)i.options[e]=n[e];o(n)},function(t){r(t.responseData||responseText)})})},r.prototype.connect=function(t){var n=this,e=function(t){t.wsConnection=new v.wsConnect(t.options),t.wsConnection.onConnect(function(){t.events.emit("ws-connected",t.wsConnection)}),t.wsConnection.onDisconnect(function(){setTimeout(function(){e(t)},1e3)})};return this.status(function(i){"token"in n.options?t&&t(i):(console.log("connecting to "+n.options.endPoint),n.options.username&&n.options.password&&n.login(n.options.username,n.options.password,function(n){t&&t(n),console.log("renewing connection")})),i.token&&i.realtimeEndPoint&&!n.wsConnection&&e(n)})};var v={renameFunction:function(t,n){return new Function("return function (call) { return function "+t+" () { return call(this, arguments) }; };")()(Function.apply.bind(n))},cached:function(t,n){function e(){return this[n]||(this[n]=t.call(this,[arguments])),this[n]}return n||(n="_"+p++),e},$POST:m,reWheelConnection:r,log:function(){console.log(arguments)},xdr:function(t,e,i,o,r){return new Promise(function(i,s){var a;e||(e={}),XMLHttpRequest?(a=new XMLHttpRequest,a.onreadystatechange=function(){if(4===a.readyState){try{var t=JSON.parse(a.responseText)}catch(t){var t=null}var n={responseData:t,responseText:a.responseText,status:a.statusText,request:a};a.status>=200&&a.status<400?i(n):s(n)}}):XDomainRequest?(a=new XDomainRequest,a.onload=function(){i(a.responseText,a.statusText,a)}):s(new Error("CORS not supported")),a.open("POST",t,!0),a.onerror=s,a.setRequestHeader("Accept","application/json"),o&&(e.__token__=o),r?(a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e=n(e).map(function(t,n){return n+"="+encodeURI(t.toString())}).toArray().join("&")):(a.setRequestHeader("Content-Type","text/plain"),e=n(e).size()?JSON.stringify(e):""),a.send(e)})},capitalize:function(t){return t[0].toUpperCase()+t.slice(1).toLowerCase()},hash:function(t){t=t.toString();for(var n=1,e=0;e<t.length;e++)n*=1+t.charCodeAt(e);return(n%34958374957).toString()},makeFilter:function(t,e,i,o){if(i||(i=" && "),0===n(e).size())return function(t){return!0};var r=n(e).map(function(e,i){return e||(e=[null]),Array.isArray(e)||(e=[e]),o||"reference"!==t.fields[i].type?"string"===t.fields[i].type&&(e=e.map(JSON.stringify)):(i="_"+i,e=n(e).map(function(t){return t&&t.constructor!==Number?t.id:t}).toArray()),"("+n(e).map(function(t){return"(x."+i+" === "+t+")"}).join(" || ")+")"}).toArray().join(i);return new Function("x","return "+r)},sameAs:function(t,n){for(var e in t)if(n[e]!=t[e])return!1;return!0},wsConnect:function(t){if(t){var n=this;this.handlers={wizard:new i,onConnection:new i,onDisconnection:new i,onMessageJson:new i,onMessageText:new i},this.onWizard=this.handlers.wizard.addHandler.bind(this.handlers.wizard),this.onConnect=this.handlers.onConnection.addHandler.bind(this.handlers.onConnection),this.onDisconnect=this.handlers.onDisconnection.addHandler.bind(this.handlers.onDisconnection),this.onMessageJson=this.handlers.onMessageJson.addHandler.bind(this.handlers.onMessageJson),this.onMessageText=this.handlers.onMessageText.addHandler.bind(this.handlers.onMessageText),this.options=t;var o=new e(t.realtimeEndPoint);o.onopen=function(t){console.log("open : "+t),o.tenant(),n.handlers.onConnection.handle(t)},o.onmessage=function(t){if("message"==t.type)try{n.handlers.onMessageJson.handle(JSON.parse(t.data))}catch(e){n.handlers.onMessageText.handle(t.data)}else console.log(t)},o.onclose=function(){setTimeout(v.wsConnect,1e3),n.handlers.onDisconnection.handle()},o.tenant=function(){o.send("TENANT:"+n.options.application+":"+n.options.token)}}},pluralize:function(t,n){return t+"s"},beforeCall:function(t,n){var e=function(){n().then(t)};return e},cleanStorage:function(){n(localStorage).keys().each(function(t){delete localStorage[t]})},reverse:function(t,n){return n.split(t).reverse().join(t)},permutations:function(t){for(var n=[],e=t.length-1;e>=0;e--)for(var i=t.length-1;i>=0;i--)e!==i&&n.push([t[e],t[i]]);return n},bool:Boolean,noop:function(){},tzOffset:6e4*(new Date).getTimezoneOffset()},g=function(t,e){function o(t,n,e){this.klass=n,this.permissions=[],this.id=t;for(var i in e)this.push.apply(this,[i,e[i]])}if(t.constructor===String)var s=new r(t);else if(t.constructor===v.reWheelConnection)var s=t;this.connection=s,s.on("connected",function(){this.connected=!0});var a=s.events;this.on=a.on.bind(this),this.emit=a.emit.bind(this),this.unbind=a.unbind.bind(this),this.$post=s.$post.bind(s),a.on("ws-connected",function(t){console.info("Websocket connected"),t.onMessageJson(l.gotData.bind(l)),t.onMessageText(function(t){console.info("WS message : "+t)})}),a.on("ws-disconnected",function(t){console.error("Websocket disconnected")}),a.on("error-json-404",function(t,n,e,i){console.error("JSON error ",JSON.stringify(t)),delete N[n.split("/")[0]]});var l=this,h={auth_group:n({})},p={},m={},g={},y={},w={},b={},N={},A=new u(n),S=new c(a,N,h,this,A);this.validationEvent=a.on("error-json-513",function(t,n,e,i){currentContext.savingErrorHanlder&&currentContext.savingErrorHanlder(new d(t))});var x=function(t){return t in h?h[t]:(h[t]=n({}),h[t])},O=function(t){return t in UNLINKED?UNLINKED[t]:(UNLINKED[t]={},UNLINKED[t])};o.prototype.save=function(t){var e={permissions:n(this.permissions).map(function(t){return[t[0].id,t[1]]}).toObject()};e.id=this.id;this.klass.modelName;l.$post(this.klass.modelName+"/set_permissions",e,function(n,e,i,o){t(n)})},o.prototype.push=function(t,e){var i=n(e),o=n(this.klass.allPermissions).map(function(t){return[t,i.contains(t)]}).toObject(),r=n(this.permissions).map(function(t){return t[0].id});r.contains(t)?this.permissions[r.indexOf(t)][1]=o:this.permissions.push([h.auth_group.get(t),o])};var M=function(t){var i=n(t.fields);t.privateArgs&&(i=i.merge(t.privateArgs)),l.emit("model-definition",t);var r="if (!row) { row = {}};\n";r+=t.references.map(function(t){return"this._"+t.id+" = row."+t.id+";"}).join(";\n"),r+=i.map(function(t,n){return"date"==t.type||"datetime"==t.type?"this."+n+" = row."+n+"?new Date(row."+n+" * 1000 - "+v.tzOffset+"):null;\n":"boolean"==t.type?"this."+n+" = (row."+n+' === "T") || (row.'+n+" === true);\n":"this."+n+" = row."+n+";\n"}).toString("\n"),r+="if (permissions) {this._permissions = permissions && Lazy(permissions).map(function (x) { return [x, true] }).toObject();}";var s=new Function("row","permissions",r);s.prototype.orm=e,s.ref_translations={},s.modelName=t.name,s.references=n(t.references).pluck("id").toArray(),s.inverse_references=t.referencedBy.map(function(t){return t.by+"_"+t.id+"_set"}),s.referents=t.referencedBy.map(function(t){return[t.by,t.id]}),s.fieldsOrder=t.fieldOrder,s.allPermissions=t.permissions,n(t.representation).size()&&(s.prototype.toString=new Function("return this."+n(t.representation).toString(' + " " + this.'))),s.prototype.toUpperCase=function(){return this.toString().toUpperCase()},s.prototype.toLowerCase=function(){return this.toString().toLowerCase()},s.prototype.delete=function(){return e.delete(this.constructor.modelName,[this.id])},Object.defineProperty(s.prototype,"permissions",{get:function(){return this._permissions?this._permissions:void S.permissions[this.constructor.modelName].ask(this.id)}}),s.prototype.all_perms=function(t){var e=this.id;l.$post(this.constructor.modelName+"/all_perms",{id:this.id},function(i){var r=i,a={},c=n(r).pluck("group_id").unique().map(function(t){return""+t}).difference(h.auth_group.keys()).toArray();n(r).groupBy(function(t){return t.group_id}).each(function(t,e){a[e]=n(t).pluck("name").toArray()});var u=function(n){t(new o(e,s,a))};c.length?l.get("auth_group",c,u):u()})},s.prototype.save=function(t){var e=this.asRaw(),i=s.fields,o=this.id,r=this.constructor.modelName;if(t)for(var a in t)e[a]=t[a];n(s.fieldsOrder).filter(function(t){return!i[t].writable}).each(function(t){t in e&&delete e[t]});var c=l.$post(r+(o?"/post":"/put"),e);return t&&t.constructor===Function&&(c.context.savingErrorHanlder=t),c},s.prototype.copy=function(){var t=new this.constructor(this.asRaw());return t._permissions=this._permissions,t};var c="return {\n"+n(t.references).map(function(t){return t.id+" : this._"+t.id}).concat(i.map(function(t,n){return"date"==t.type||"datetime"==t.type?n+" : (this."+n+"?(Math.round(this."+n+".getTime() - this."+n+".getTimezoneOffset() * 60000) / 1000):null)":"boolean"==t.type?n+" : this."+n+'?"T":"F"':n+" : this."+n})).toString(",\n")+"};";s.prototype.asRaw=new Function(c),s.saveMulti=function(t,e,i){var o=[],r=n(s.fields).filter(function(t){return!t.writable}).pluck("id").toArray();n(t).map(function(t){return t.asRaw()}).each(function(t){n(r).each(function(n){delete t[n]}),o.push(t)}),l.$post(s.modelName,"put",{multiple:o,formIdx:l.formIdx++},function(t){l.gotData(t);var i=h[s.modelName],o=n(t[s.modelName].results).pluck("id").map(function(t){return i.get(t)}).toArray();e&&e(o)},i)},"extra_verbs"in t&&n(t.extra_verbs).each(function(t){var e=t[0],i=t[1],o="data = {id : this.id";i.length&&(o+=", "+n(i).map(function(t){return t+" : "+t}).join(",")),o+="};",i.push("cb"),s.prototype[e]=new Function(i,o+'W2S.W2P_POST(this.constructor.modelName,"'+e+'", data,function(data,status,headers,x){try{\n   if (!headers("nomodel")) {window.W2S.gotData(data,cb);}\n   else {if (cb) {cb(data)}}\n} catch(e){\nif (cb) {cb(data);}\n}\n});\n')}),"privateArgs"in t&&(s.privateArgs=n(t.privateArgs).keys().map(function(t){return[t,!0]}).toObject(),s.prototype.savePA=function(t){var e=this,i={id:this.id},o=this.constructor.privateArgs,r=this.constructor.fields,s=(new this.constructor(t).asRaw(),n(o).keys().map(function(t){return[t,r[t]]}).toObject());n(t).each(function(t,n){n in o&&s[n].writable&&(i[n]=t)}),l.$post(this.constructor.modelName+"/savePA",i,function(){n(i).each(function(t,n){e[n]=t})})}),w[s.modelName]=s;for(var u in t.fields)t.fields[u].id=u;return s.fields=n(t.fields).concat(n(t.privateArgs)).concat(n(t.references).tap(function(t){t.type=t.type||"reference"})).indexBy("id").toObject(),n(t.references).each(function(t){var n=t.to,i="_"+t.id;f(s.prototype,t.id,function(){if(!(n in h)){var t=this;l.describe(n,function(e){S.mainIndex[n].ask(t[i],!0)})}var e=n in h&&this[i]&&h[n].get(this[i]);return!e&&n in S.mainIndex?S.mainIndex[n].ask(this[i],!0):e},function(e){if(e&&e.constructor.modelName!=n)throw new TypeError("You can assign only "+n+" to "+t.id);this[i]=e.id},"new-"+n,"deleted-"+n,"updated-"+n,"new-model-"+n),s.prototype["get"+v.capitalize(t.id)]=function(){return e.get(n,this[i])}}),n(t.referencedBy).each(function(t){var n=t.by+"."+t.id,i=t.by+"_"+v.pluralize(t.id),o=t.by;s.prototype.hasOwnProperty(i)?$log.error("Tryed to redefine property "+i+"s for "+s.modelName):f(s.prototype,i,function(){var t=o in h?p[n].get(this.id+""):null;return S.foreignKeys[n].ask(this.id,!0),t},null,"new-"+o,"updated-"+o,"deleted-"+o),s.prototype["get"+v.capitalize(v.pluralize(t.by))]=function(){var n={};return n[t.id]=[this.id],e.query(t.by,n)}}),t.manyToMany&&(n(t.manyToMany).each(function(t){var e=t.indexName,i=t.first?0:1,o=t.model,r=S.m2mIndex[e]["get"+(1-i)];f(s.prototype,t.model+"s",function(){var t=this,e=[],i=r(t.id),s=null;return i.length&&(s=x(o).get.bind(h[o])),i&&s&&(e=n(i).map(s).filter(v.bool).toArray()),e},null,"received-m2m-"+e,"received-"+o),s.prototype["get"+v.capitalize(v.pluralize(o))]=function(){var t=this;return new Promise(function(s,a){try{S.getM2M(e,[t.id],i,function(e){var i=r(t.id);i.length?l.fetch(o,{id:i},null,function(){var t=h[o].get.bind(h[o]);s(n(i).map(t).filter(v.bool).toArray())}):s([])})}catch(t){console.error(t),a(t)}})},s.fields[v.capitalize(o)]={id:v.capitalize(o),name:v.capitalize(o),writable:!0,readable:!0,type:"M2M",validators:[]}}),s.prototype.unlinkReference=function(t){var e=!1,i=this.id,o=[];"Array"==t.constructor.name&&(e=!0,o=t,t=o[0]);var r=t.constructor.modelName;if(e)var a=n(o).pluck("id").map(function(t){return[i,t]}).toArray();else var a=[[i,t.id]];l.$post(s.modelName+"/"+r+"s/delete",{collection:a})},s.prototype.linkReference=function(t){var e=!1,i=this.id,o=[];"Array"==t.constructor.name&&(e=!0,o=t,t=o[0]);var r=t.constructor.modelName,a=s.modelName+"/"+r;if(e){var c=[];if(a in INDEX_M2M&&(c=n(o).pluck("id").difference(n(INDEX_M2M[a][0].get(this.id))).toArray()),a=r+"/"+s.modelName,a in INDEX_M2M&&(c=n(o).pluck("id").difference(n(INDEX_M2M[a][0].get(this.id))).toArray()),c.length){var u=n(c).map(function(t){return[i,t]}).toArray();W2P_POST(s.modelName,r+"s/put",{collection:u},function(t){})}}else{if(a in S.m2mIndex&&n(S.m2mIndex[a]["get"+v.capitalize(r)](t.id)).find(this))return;l.$post(s.modelName+"/"+r+"s/put",{collection:[[this.id,t.id]]})}}),a.emit("new-model",s),a.emit("new-model-"+s.modelName),s};this.gotData=function(t,e){if(console.info("gotData"),"string"!=typeof t){"_extra"in t&&delete t._extra;var i=t.TOONE,o=t.TOMANY,r=t.MANYTOMANY,s=t.PERMISSIONS,c=t.PA;if(delete t.TOONE,delete t.TOMANY,delete t.MANYTOMANY,delete t.PERMISSIONS,delete t.PA,c||(c={}),t=n(t).filter(function(t,n){return!("deleted"in t)||n in w}).toObject(),"m2m"in t){var u=t.m2m;delete t.m2m}n(t).each(function(t,e){l.describe(e,function(i){var o=i;t.results&&t.results.length>0&&t.results[0].constructor==Array&&(t.results=n(t.results).map(function(t){return n(o.fieldsOrder).zip(t).toObject()}).toArray());var r=n(t.results),s=t.deleted;if(e in c){var u=c[e];n(r).each(function(t){t.id in u&&n(u[t.id]).each(function(n,e){t[e]=n})})}var l=x(e),f=l.source;s&&s.forEach(function(t){delete f[t]});var d=r.indexBy("id"),m=d.keys(),g=m.difference(l.keys().map(function(t){return parseInt(t)})),y=m.difference(g);y=y.filter(function(t){return!v.sameAs(d.get(t),l.get(t).asRaw())});var b=n(t.permissions?t.permissions:{}),N=g.map(function(t){return new o(d.get(t),b.get(t))}),A=[];y.each(function(t){var e=l.get(t),r=e.copy(),s=new o(d.get(t));n(i.fields).keys().each(function(t){e[t]=s[t]}),A.push([e,r])}),A.length&&a.emit("updated-"+e,A);var S=N.toArray();n(S).each(function(t){f[t.id]=t}),n(w[e].references).each(function(t){p[e+"."+t]=h[e].groupBy("_"+t)}),S.length&&a.emit("new-"+e,n(S),t.totalResults),s&&a.emit("deleted-"+e,s),a.emit("received-"+e)})}),i&&(console.error("TOONE"),n(i).each(function(t,n){console.log(n);O(n)})),o&&(console.error("TOMANY"),n(o).each(function(t,e){e in ASKED_UNLINKED||(ASKED_UNLINKED[e]=n([])),n(t).each(function(t){ASKED_UNLINKED[e].source.push(t)})})),r&&(console.error("MANYTOMANY"),n(r).each(function(t,e){var i=parseInt(e.split("|")[1]);e=e.split("|")[0],e in ASKED_M2M||(ASKED_M2M[e]=[{},{}]);var o=ASKED_M2M[e][i];n(t).each(function(t){o[t+""]=!0,o[t]=!0})})),u&&l.gotM2M(u),s&&l.gotPermissions(s),e&&e(t),a.emit("got-data")}else if(console.log("data "+t+" refused from gotData()"),e)return e(t)},this.gotPermissions=function(t){n(t).each(function(t,e){n(t[0]).each(function(t,i){e in h&&i in h[e].source&&(h[e].get(i)._permissions=n(t).map(function(t){return[t,!0]}).toObject())}),n(t[0]).size()&&l.emit("update-permissions-"+e,n(t[0]).keys().toArray())}),this.emit("update-permissions")},this.gotM2M=function(t){n(t).each(function(t,e){var i=S.m2mIndex[e];n(t).each(function(t){n(t).each(function(t,n){i[n](t)})}),a.emit("received-m2m"),a.emit("received-m2m-"+e)})},this.fetch=function(t,n,e,i){t in N?setTimeout(function(){l.fetch(t,n,e,i)},500):l.describe(t,function(e){return l.connection.options.realtimeEndPoint?(n=A.filter(e,n),n?(N[t]=!0,l.$post(t+"/list",{filter:n},function(n){l.gotData(n,i),delete N[t]},function(){delete N[t]})):i&&i(),n):void this.$post(t+"/list",sendData,function(e){n||GOT_ALL.source.push(t),l.gotData(e,i)})})},this.get=function(t,n,e){n.constructor!==Array&&(n=[n]),l.fetch(t,{id:n},null,function(){var i=[],o=h[t];for(var r in n)i.push(o.source[n[r]]);e(i)})},this.gotModel=function(t){for(var e in t){var i=t[e];localStorage["description:"+e]=JSON.stringify(t),w[e]=M(i),e in h||(h[e]=n({}))}},this.describe=function(t,n){var e=w[t];if(e)n&&n(e);else if(t in N)setTimeout(function(){l.describe(t,n)},500);else{if(t in b)return;var i="description:"+t;i in localStorage?(this.gotModel(JSON.parse(localStorage[i])),n&&n(w[t])):(N[t]=!0,this.$post(t+"/describe",null,function(e){l.gotModel(e),n&&n(w[t]),delete N[t]},function(n){this.events.modelNotFound.handle(t),b[t]=!0}))}},this.addModelHandler=function(t,n){var e=v.hash(n);t in m||(m[t]=new i),t in g||(g[t]={}),e in g[t]||(g[t][e]=!0,t in w?n(w[t]):m[t].addHandler(n))},this.addPersistentAttributes=function(t,e){var i=function(t,n){n.forEach(function(n){var e="pA:"+t.modelName+":"+n,i="__"+n;Object.defineProperty(t.prototype,n,{get:function(){if(!(i in this)){var t=localStorage[e+this.id];this[i]=t?JSON.parse(t):null}return this[i]},set:function(t){this[i]=t,localStorage[e+this.id]=JSON.stringify(t)}})})};t in y||(y[t]=[]);var o=y[t];if(e)var r=n(e).difference(o).toArray();else var r=o;r.length&&(t in w&&i(w[t],r),e&&Array.prototype.push.apply(o,r))},this.on("new-model",function(t){t.modelName in m&&m[t.modelName].handle(w[t.modelName]),t.modelName in y&&l.addPersistentAttributes(t.modelName)}),this.connect=function(t){this.isConnected?t(this.connection.options):this.connection.connect(function(n){l.isConnected=!0,t(n)})},this.query=function(t,e,i,o){var r=this;this.describe(t,function(s){e=n(e).map(function(t,n){return[n,Array.isArray(t)?t:[t]]}).toObject();var a=v.makeFilter(s,e),c=x(t);r.fetch(t,e,i,function(t){o(c.filter(a).values().toArray())})})},this.delete=function(t,n,e){return this.$post(t+"/delete",{id:n},e)}};h.prototype.getModel=function(t){var n=this;return new Promise(function(e,i){try{n.$orm.connect(function(){n.$orm.describe(t,e)})}catch(t){i(t)}})},h.prototype.get=function(t,n){var e=this,i=!1,o=t;return n.constructor!==Array&&(i=!0,n=[n]),new Promise(function(t,r){try{e.$orm.connect(function(){i?e.$orm.get(o,n,function(n){t(n[0])}):e.$orm.get(o,n,t)})}catch(t){r(t)}})},h.prototype.query=function(t,n,e){var i=this;return new Promise(function(o,r){var s=null;e&&e.constructor===Array&&e.length?s=e:e&&e.constructor===String&&e.length&&(s=e.split(","));try{i.$orm.isConnected?i.$orm.query(t,n,s,o):i.$orm.connect(function(){i.$orm.query(t,n,s,o)})}catch(t){r(t)}})},h.prototype.delete=function(t,n){var e=this;return new Promise(function(i,o){try{e.$orm.connected?e.$orm.delete(t,n,i):e.$orm.connect(function(){e.$orm.delete(t,n,i)})}catch(t){o(t)}})},t.rwt=h}(window,Lazy,SockJS);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZXJzLmpzIiwidXRpbHMuanMiLCJ0b3VjaGVyLmpzIiwidmFjdXVtY2FjaGVyLmpzIiwiYXV0b2xpbmtlci5qcyIsImxpc3RjYWNoZXIuanMiLCJtYW55dG9tYW55LmpzIiwiY2FjaGVyLmpzIiwib3JtLmpzIl0sIm5hbWVzIjpbIkhhbmRsZXIiLCJ0aGlzIiwiaGFuZGxlcnMiLCJzdHJIYW5kbGVycyIsIk5hbWVkRXZlbnRNYW5hZ2VyIiwiZXZlbnRzIiwiaGFuZGxlcklkIiwiaWR4SWQiLCJvbiIsIm5hbWUiLCJmdW5jIiwiQXJyYXkiLCJpZCIsInB1c2giLCJlbWl0IiwiYXJncyIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImZvckVhY2giLCJldmVudCIsImFwcGx5IiwidW5iaW5kIiwiaGFuZGxlciIsImNvdW50IiwiTGF6eSIsImVhY2giLCJ2IiwiayIsImlkeCIsIm4iLCJyZXZlcnNlIiwieCIsInNwbGljZSIsInJlV2hlZWxDb25uZWN0aW9uIiwiZW5kUG9pbnQiLCJnZXRMb2dpbiIsIiRQT1NUIiwiYmluZCIsIm9wdGlvbnMiLCJUb3VjaGVyIiwidG91Y2hlZCIsInRvdWNoIiwidCIsIlZhY3V1bUNhY2hlciIsImFza2VkIiwibWlzc2luZyIsImFzayIsImxhenkiLCJjb250YWlucyIsImdldEFza2VkSW5kZXgiLCJtaXNzaW5ncyIsImxlbmd0aCIsInVuaXF1ZSIsInRvQXJyYXkiLCJBdXRvTGlua2VyIiwiYWN0aXZlcyIsIklEQiIsIlcyUFJFU09VUkNFIiwibGlzdENhY2hlIiwibWFpbkluZGV4IiwiZm9yZWlnbktleXMiLCJtMm0iLCJtMm1JbmRleCIsInBlcm1pc3Npb25zIiwibW9kZWwiLCJwa0luZGV4IiwiZ2V0SW5kZXhGb3IiLCJyZWZlcmVuY2VzIiwicmVmZXJlbmNlIiwiaW5kZXhOYW1lIiwidG8iLCJyZWZlcmVuY2VkQnkiLCJmaWVsZCIsImJ5IiwibWFueVRvTWFueSIsInJlbGF0aW9uIiwiTWFueVRvTWFueVJlbGF0aW9uIiwibTJtR2V0IiwiY29sbGVjdGlvbiIsImNhbGxCYWNrIiwiJHBvc3QiLCJ1dGlscyIsImRhdGEiLCJnb3REYXRhIiwiZ2V0TTJNIiwibGlua1VubGlua2VkIiwidmFsdWVzIiwic3VtIiwiY2hhbmdlZCIsImluZGV4ZXMiLCJpbmRleCIsImZpbHRlciIsIkJvb2xlYW4iLCJtYXAiLCJwYXJzZUludCIsIklOREVYIiwiZ2V0dGVyIiwiaWRzIiwib3RoZXJJbmRleCIsInNwbGl0IiwiZGVzY3JpYmUiLCJmbGF0dGVuIiwibW9kZWxOYW1lIiwia2V5cyIsImZldGNoIiwibm9vcCIsIm1haW5SZXNvdXJjZSIsImZpZWxkTmFtZSIsInRvT2JqZWN0IiwicmVzb3VyY2VOYW1lIiwiZ290UGVybWlzc2lvbnMiLCJQRVJNSVNTSU9OUyIsInNldEludGVydmFsIiwiTGlzdENhY2hlciIsImdvdEFsbCIsImNvbXBvc2l0ZUFza2VkIiwiY2FydGVzaWFuUHJvZHVjdDEiLCJ5IiwiaXNBcnJheSIsInJldCIsImEiLCJiIiwiY2FydGVzaWFuUHJvZHVjdCIsImFyciIsImV4cGxvZGVGaWx0ZXIiLCJwcm9kdWN0IiwiciIsImZpbHRlclNpbmdsZSIsInRlc3RPbmx5Iiwia2V5IiwiZGlmZmVyZW5jZSIsImNsZWFuQ29tcG9zaXRlcyIsImZpbHRlckxlbiIsInNpemUiLCJtYWtlRmlsdGVyIiwiaXRlbSIsImdvdCIsInRocyIsInNpbmdsZSIsInNvbWUiLCJmIiwiZXhwbG9kZWQiLCJwYXJ0aWFscyIsImJhZCIsInBsdWNrIiwiaXRlbXMiLCJhZGQiLCJjb25zb2xlIiwibG9nIiwiZmluZCIsImdldDAiLCJnZXQxIiwiY2FwaXRhbGl6ZSIsImRlbCIsImwiLCJjYWNoZWRQcm9wZXJ0eUJ5RXZlbnRzIiwicHJvdG8iLCJwcm9wZXJ0eU5hbWUiLCJzZXR0ZXIiLCJyZXN1bHQiLCJvcm0iLCJwcm9wZXJ0eURlZiIsImdldCIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJWYWxpZGF0aW9uRXJyb3IiLCJyZXNvdXJjZSIsIl9yZXNvdXJjZSIsImZvcm1JZHgiLCJmaWVsZHMiLCJlcnJvcnMiLCJyZVdoZWVsT1JNIiwibG9naW5GdW5jIiwiJG9ybSIsImJhc2VPUk0iLCJhZGRNb2RlbEhhbmRsZXIiLCJhZGRQZXJzaXN0ZW50QXR0cmlidXRlcyIsImFkZEhhbmRsZXIiLCJzdHJIYW5kbGVyIiwiaGFzaCIsInRvU3RyaW5nIiwiaGFuZGxlIiwiaGFuZGxlQnkiLCJjYWNoZWRLZXlJZHgiLCJ1cmwiLCJlcnJvckJhY2siLCJoZWFkZXJzIiwib3B0cyIsImFjY2VwdHMiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJtZXRob2QiLCJjb250ZW50VHlwZSIsImNyb3NzRG9tYWluIiwiJCIsImFqYXgiLCJzdGF0dXMiLCJmb3JjZSIsImxvY2FsU3RvcmFnZSIsInBhcnNlIiwibGFzdFJXVFN0YXR1cyIsImUiLCJfc3RhdHVzX2NhbGxpbmciLCJzZWxmIiwic2V0VGltZW91dCIsInRpbWVzdGFtcCIsInVzZXJfaWQiLCJsb2dJbmZvIiwiY29uc3RydWN0b3IiLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0aGVuIiwidG9rZW4iLCJhcHBsaWNhdGlvbiIsInByb21pc2UiLCJ4ZHIiLCJ4aHIiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZURhdGEiLCJjb25uZWN0aW9uIiwiUHJvbWlzZSIsImFjY2VwdCIsInJlamVjdCIsImNvbm5lY3QiLCJ3c2Nvbm5lY3QiLCJ3c0Nvbm5lY3Rpb24iLCJ3c0Nvbm5lY3QiLCJvbkNvbm5lY3QiLCJvbkRpc2Nvbm5lY3QiLCJyZWFsdGltZUVuZFBvaW50IiwicmVuYW1lRnVuY3Rpb24iLCJmbiIsIkZ1bmN0aW9uIiwiY2FjaGVkIiwid3JhcHBlciIsImZvcm1FbmNvZGUiLCJyZXEiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJyZXF1ZXN0IiwiWERvbWFpblJlcXVlc3QiLCJvbmxvYWQiLCJFcnJvciIsIm9wZW4iLCJvbmVycm9yIiwic2V0UmVxdWVzdEhlYWRlciIsIl9fdG9rZW5fXyIsImVuY29kZVVSSSIsImpvaW4iLCJzZW5kIiwicyIsInRvVXBwZXJDYXNlIiwidG9Mb3dlckNhc2UiLCJzdHIiLCJjaGFyQ29kZUF0IiwidW5pZmllciIsImRvbnRUcmFuc2xhdGVGaWx0ZXIiLCJzb3VyY2UiLCJ2YWxzIiwidHlwZSIsIk51bWJlciIsInNhbWVBcyIsIndpemFyZCIsIm9uQ29ubmVjdGlvbiIsIm9uRGlzY29ubmVjdGlvbiIsIm9uTWVzc2FnZUpzb24iLCJvbk1lc3NhZ2VUZXh0Iiwib25XaXphcmQiLCJTb2NrSlMiLCJvbm9wZW4iLCJ0ZW5hbnQiLCJvbm1lc3NhZ2UiLCJvbmNsb3NlIiwicGx1cmFsaXplIiwiYmVmb3JlQ2FsbCIsImJlZm9yZSIsImRlY29yYXRvciIsImNsZWFuU3RvcmFnZSIsImNociIsInBlcm11dGF0aW9ucyIsImJvb2wiLCJ0ek9mZnNldCIsIkRhdGUiLCJnZXRUaW1lem9uZU9mZnNldCIsImV4dE9STSIsIlBlcm1pc3Npb25UYWJsZSIsImtsYXNzIiwiU3RyaW5nIiwiY29ubmVjdGVkIiwid3MiLCJpbmZvIiwibWVzc2FnZSIsInNlbnREYXRhIiwid2FpdGluZ0Nvbm5lY3Rpb25zIiwiYXV0aF9ncm91cCIsIlJFVklEWCIsImJ1aWxkZXJIYW5kbGVycyIsImJ1aWxkZXJIYW5kbGVyVXNlZCIsInBlcnNpc3RlbnRBdHRyaWJ1dGVzIiwibW9kZWxDYWNoZSIsImZhaWxlZE1vZGVscyIsImxpbmtlciIsInZhbGlkYXRpb25FdmVudCIsImN1cnJlbnRDb250ZXh0Iiwic2F2aW5nRXJyb3JIYW5sZGVyIiwiZ2V0SW5kZXgiLCJnZXRVbmxpbmtlZCIsIlVOTElOS0VEIiwic2F2ZSIsImNiIiwibXlQZXJtcyIsImdyb3VwX2lkIiwicGVybWlzc2lvbkxpc3QiLCJwIiwicGVybXMiLCJhbGxQZXJtaXNzaW9ucyIsImluZGV4T2YiLCJtYWtlTW9kZWxDbGFzcyIsInByaXZhdGVBcmdzIiwibWVyZ2UiLCJmdW5jU3RyaW5nIiwiS2xhc3MiLCJyZWZfdHJhbnNsYXRpb25zIiwiaW52ZXJzZV9yZWZlcmVuY2VzIiwicmVmZXJlbnRzIiwiZmllbGRzT3JkZXIiLCJmaWVsZE9yZGVyIiwicmVwcmVzZW50YXRpb24iLCJkZWxldGUiLCJfcGVybWlzc2lvbnMiLCJhbGxfcGVybXMiLCJvYmplY3RfaWQiLCJncm91cGVkIiwidW5rbm93bl9ncm91cHMiLCJncm91cEJ5IiwibyIsImFzUmF3IiwiSUQiLCJhcmciLCJ3cml0YWJsZSIsImNvbnRleHQiLCJjb3B5Iiwib2JqIiwiYXNyIiwiY29uY2F0Iiwic2F2ZU11bHRpIiwib2JqZWN0cyIsInNjb3BlIiwicmF3IiwiZGVsZXRhYmxlIiwibXVsdGlwbGUiLCJlbGVtcyIsInRhYiIsIm9ianMiLCJyZXN1bHRzIiwiZXh0cmFfdmVyYnMiLCJmdW5jTmFtZSIsImRkYXRhIiwic2F2ZVBBIiwiVCIsIm9vIiwiUEEiLCJGcyIsImZpZWxkSWR4IiwidGFwIiwiaW5kZXhCeSIsInJlZiIsImV4dF9yZWYiLCJsb2NhbF9yZWYiLCJUeXBlRXJyb3IiLCJyZXZJbmRleCIsImhhc093blByb3BlcnR5IiwiJGxvZyIsInF1ZXJ5IiwiZmlyc3QiLCJvbW9kZWxOYW1lIiwicmVhZGFibGUiLCJ2YWxpZGF0b3JzIiwidW5saW5rUmVmZXJlbmNlIiwiaW5zdGFuY2UiLCJpbnN0YW5jZXMiLCJvbW9kZWwiLCJsaW5rUmVmZXJlbmNlIiwicmVmcyIsIklOREVYX00yTSIsIlcyUF9QT1NUIiwiX2V4dHJhIiwiVE9PTkUiLCJUT01BTlkiLCJNQU5ZVE9NQU5ZIiwibW9kZWxDbGFzcyIsInppcCIsImRlbGV0ZWQiLCJNUEEiLCJyZWNvcmQiLCJpdGFiIiwidGFibGUiLCJpayIsIm5uZXciLCJ1cGRhdGVkIiwibmV3T2JqZWN0cyIsIm9sZEl0ZW0iLCJvbGRDb3B5IiwibmV3SXRlbSIsIm5vIiwidG90YWxSZXN1bHRzIiwiQVNLRURfVU5MSU5LRUQiLCJBU0tFRF9NMk0iLCJNSURYIiwiZ290TTJNIiwicm93IiwibSIsInZlcmIiLCJ0b2dldGhlciIsInNlbmREYXRhIiwiR09UX0FMTCIsImdvdE1vZGVsIiwiY2FjaGVLZXkiLCJtb2RlbE5vdEZvdW5kIiwiYXR0cmlidXRlcyIsImFkZFByb3BlcnR5IiwidmFsIiwia2F0dHIiLCJzZXQiLCJhdHRycyIsIm5ld0F0dHJzIiwiaXNDb25uZWN0ZWQiLCJmaWx0ZXJGdW5jdGlvbiIsImdldE1vZGVsIiwibW9kTmFtZSIsInJlbGF0ZWQiXSwibWFwcGluZ3MiOiI2QkFFQSxTQUFBQSxLQUNBQyxLQUFBQyxZQUNBRCxLQUFBRSxlQXlCQSxRQUFBQyxLQUNBLEdBQUFDLE1BQ0FDLEtBQ0FDLEVBQUEsQ0FDQU4sTUFBQU8sR0FBQSxTQUFBQyxFQUFBQyxHQUNBRCxJQUFBSixLQUNBQSxFQUFBSSxHQUFBLEdBQUFFLE9BRUEsSUFBQUMsR0FBQUwsR0FHQSxPQUZBRixHQUFBSSxHQUFBSSxLQUFBSCxHQUNBSixFQUFBTSxHQUFBRixFQUNBRSxHQUVBWCxLQUFBYSxLQUFBLFNBQUFMLEdBQ0EsR0FBQUEsSUFBQUosR0FBQSxDQUNBLEdBQUFVLEdBQUFKLE1BQUFLLFVBQUFDLE1BQUFDLEtBQUFDLFVBQUEsRUFDQWQsR0FBQUksR0FBQVcsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxNQUFBLEtBQUFQLE9BSUFkLEtBQUFzQixPQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQSxDQUNBLElBQUFELElBQUFsQixHQUFBLENBQ0EsR0FBQUksR0FBQUosRUFBQWtCLEVBQUEsR0FDQUUsR0FBQXJCLEdBQUFzQixLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsS0FDQSxLQUFBLEdBQUFDLEtBQUFILEdBQ0FBLEVBQUFHLEtBQUFyQixJQUNBb0IsRUFBQWpCLEtBQUFrQixHQUNBTixJQUdBSyxHQUFBRSxVQUFBWixRQUFBLFNBQUFhLEdBQ0FMLEVBQUFNLE9B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akMsS0FBQWtLLE9BQUExTyxFQUFBTCxFQUFBaUksR0FFQW5CLEVBQUFqQyxLQUFBc0QsUUFBQSxXQUNBckIsRUFBQWpDLEtBQUFrSyxPQUFBMU8sRUFBQUwsRUFBQWlJLEtBR0EsTUFBQXJCLEdBQ0FzQixFQUFBdEIiLCJmaWxlIjoicnd0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gSGFuZGxlcigpe1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICB0aGlzLnN0ckhhbmRsZXJzID0ge307XG59O1xuXG5IYW5kbGVyLnByb3RvdHlwZS5hZGRIYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpe1xuICAgIHZhciBzdHJIYW5kbGVyID0gdXRpbHMuaGFzaChoYW5kbGVyLnRvU3RyaW5nKCkpO1xuICAgIGlmICghKHN0ckhhbmRsZXIgaW4gdGhpcy5zdHJIYW5kbGVycykpe1xuICAgICAgICB0aGlzLnN0ckhhbmRsZXJzW3N0ckhhbmRsZXJdID0gaGFuZGxlcjtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgIH1cbn07XG5IYW5kbGVyLnByb3RvdHlwZS5oYW5kbGUgPSBmdW5jdGlvbigpe1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO1xuICAgIHRoaXMuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihmdW5jKXtcbiAgICAgICAgZnVuYy5hcHBseShudWxsLGFyZ3MpO1xuICAgIH0pXG59O1xuSGFuZGxlci5wcm90b3R5cGUuaGFuZGxlQnkgPSBmdW5jdGlvbigpe1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO1xuICAgIHZhciB0aHMgPSBhcmd1bWVudHNbMF07XG4gICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmMpe1xuICAgICAgICBmdW5jLmFwcGx5KHRocyxhcmdzKTtcbiAgICB9KVxufTtcblxuXG5mdW5jdGlvbiBOYW1lZEV2ZW50TWFuYWdlciAoKXtcbiAgICB2YXIgZXZlbnRzID0ge307XG4gICAgdmFyIGhhbmRsZXJJZCA9IHt9O1xuICAgIHZhciBpZHhJZCA9IDA7XG4gICAgdGhpcy5vbiA9IGZ1bmN0aW9uKG5hbWUsIGZ1bmMpe1xuICAgICAgICBpZiAoIShuYW1lIGluIGV2ZW50cykpe1xuICAgICAgICAgICAgZXZlbnRzW25hbWVdID0gbmV3IEFycmF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkID0gaWR4SWQgKys7XG4gICAgICAgIGV2ZW50c1tuYW1lXS5wdXNoKGZ1bmMpO1xuICAgICAgICBoYW5kbGVySWRbaWRdID0gZnVuYztcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH07XG4gICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24obmFtZSl7XG4gICAgICAgIGlmIChuYW1lIGluIGV2ZW50cyl7XG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtcbiAgICAgICAgICAgIGV2ZW50c1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICBldmVudC5hcHBseShudWxsLGFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMudW5iaW5kID0gZnVuY3Rpb24oaGFuZGxlcil7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIGlmIChoYW5kbGVyIGluIGhhbmRsZXJJZCl7XG4gICAgICAgICAgICB2YXIgZnVuYyA9IGhhbmRsZXJJZFtoYW5kbGVyICsgJyddO1xuICAgICAgICAgICAgTGF6eShldmVudHMpLmVhY2goZnVuY3Rpb24odixrKXtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB2KXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbbl0gPT09IGZ1bmMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWR4LnB1c2gobik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeC5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbih4KXtcbiAgICAgICAgICAgICAgICAgICAgdi5zcGxpY2UoeCwxKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBoYW5kbGVySWRbaGFuZGxlcl07XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9O1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGVkS2V5SWR4ID0gMDtcblxudmFyICRQT1NUID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjYWxsQmFjaywgZXJyb3JCYWNrLGhlYWRlcnMpe1xuICAgIHZhciBvcHRzID0ge1xuICAgICAgICBhY2NlcHRzIDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB1cmwgOiB1cmwsXG4gICAgICAgIGRhdGEgOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgZGF0YVR5cGUgOiAnanNvbicsXG4gICAgICAgIHN1Y2Nlc3MgOiBjYWxsQmFjayxcbiAgICAgICAgZXJyb3IgOiBlcnJvckJhY2ssXG4gICAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgICAgY29udGVudFR5cGUgOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9O1xuICAgIGlmIChoZWFkZXJzKXtcbiAgICAgICAgb3B0cy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgb3B0cy5jcm9zc0RvbWFpbiA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiAkLmFqYXgob3B0cyk7XG59XG5cbmZ1bmN0aW9uIHJlV2hlZWxDb25uZWN0aW9uKGVuZFBvaW50LCBnZXRMb2dpbil7XG4gICAgLy8gbWFpbiBcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5nZXRMb2dpbiA9IGdldExvZ2luO1xuICAgIHRoaXMuZXZlbnRzID0gbmV3IE5hbWVkRXZlbnRNYW5hZ2VyKClcbiAgICB0aGlzLiRQT1NUID0gJFBPU1QuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB7ZW5kUG9pbnQgOiBlbmRQb2ludH07XG4gICAgdGhpcy5vbiA9IHRoaXMuZXZlbnRzLm9uLmJpbmQodGhpcyk7XG59O1xucmVXaGVlbENvbm5lY3Rpb24ucHJvdG90eXBlLnN0YXR1cyA9IGZ1bmN0aW9uKGNhbGxCYWNrLCBmb3JjZSl7XG4gICAgaWYgKCgnbGFzdFJXVFN0YXR1cycgaW4gbG9jYWxTdG9yYWdlKSAmJiAhZm9yY2UpIHtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgdmFyIHN0YXR1cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxhc3RSV1RTdGF0dXMpO1xuICAgICAgICAgICAgZm9yICh2YXIgeCBpbiBzdGF0dXMpeyB0aGlzLm9wdGlvbnNbeF0gPSBzdGF0dXNbeF07IH1cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMoY2FsbEJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsQmFjayAmJiBjYWxsQmFjayhzdGF0dXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdHVzX2NhbGxpbmcpe1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxmLnN0YXR1cyhjYWxsQmFjayk7XG4gICAgICAgIH0sNTApO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy50aW1lc3RhbXApe1xuICAgICAgICBjYWxsQmFjayAmJiBjYWxsQmFjayh0aGlzLm9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3N0YXR1c19jYWxsaW5nID0gdHJ1ZTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy4kcG9zdCgnYXBpL3N0YXR1cycsbnVsbCxmdW5jdGlvbihzdGF0dXMpe1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxhc3RSV1RTdGF0dXMgPSBKU09OLnN0cmluZ2lmeShzdGF0dXMpO1xuICAgICAgICAgICAgc2VsZi5fc3RhdHVzX2NhbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIHggaW4gc3RhdHVzKXsgc2VsZi5vcHRpb25zW3hdID0gc3RhdHVzW3hdOyB9XG4gICAgICAgICAgICBpZiAoIXN0YXR1cy51c2VyX2lkICYmIHNlbGYuZ2V0TG9naW4pe1xuICAgICAgICAgICAgICAgIHZhciBsb2dJbmZvID0gc2VsZi5nZXRMb2dpbigpO1xuICAgICAgICAgICAgICAgIGlmIChsb2dJbmZvLmNvbnN0cnVjdG9yID09PSBPYmplY3Qpe1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvZ2luKGxvZ0luZm8udXNlcm5hbWUsIGxvZ0luZm8ucGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0YXR1cyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4IGluIHN0YXR1cyl7IHNlbGYub3B0aW9uc1t4XSA9IHN0YXR1c1t4XTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxhc3RSV1RTdGF0dXMgPSBKU09OLnN0cmluZ2lmeShzdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2soc3RhdHVzKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2soc2VsZi5vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7ICAgICAgICBcbiAgICB9XG59O1xuXG5yZVdoZWVsQ29ubmVjdGlvbi5wcm90b3R5cGUuJHBvc3QgPSBmdW5jdGlvbih1cmwsIGRhdGEsY2FsbEJhY2spe1xuICAgIHZhciB0aHMgPSB0aGlzO1xuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnRva2VuKXtcbiAgICAgICAgaWYgKCFkYXRhKXtcbiAgICAgICAgICAgIGRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLnRva2VuKXtcbiAgICAgICAgdmFyIGhlYWRlcnMgPSB7IFxuICAgICAgICAgICAgdG9rZW4gOiB0aGlzLm9wdGlvbnMudG9rZW4sXG4gICAgICAgICAgICBhcHBsaWNhdGlvbiA6IHRoaXMub3B0aW9ucy5hcHBsaWNhdGlvblxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBoZWFkZXJzID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHV0aWxzLnhkcih0aGlzLm9wdGlvbnMuZW5kUG9pbnQgKyB1cmwsIGRhdGEsIHRoaXMub3B0aW9ucy5hcHBsaWNhdGlvbiwgdGhpcy5vcHRpb25zLnRva2VuKVxuICAgICAgICAudGhlbihmdW5jdGlvbih4aHIpe1xuICAgICAgICAgICAgdGhzLmV2ZW50cy5lbWl0KCdodHRwLXJlc3BvbnNlJywgeGhyLnJlc3BvbnNlVGV4dCwgeGhyLnN0YXR1cywgdXJsLCBkYXRhKTtcbiAgICAgICAgICAgIHRocy5ldmVudHMuZW1pdCgnaHR0cC1yZXNwb25zZS0nICsgeGhyLnN0YXR1cywgeGhyLnJlc3BvbnNlVGV4dCwgdXJsLCBkYXRhKTtcbiAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VEYXRhKXtcbiAgICAgICAgICAgICAgICB0aHMuZXZlbnRzLmVtaXQoJ2h0dHAtcmVzcG9uc2UtJyArIHhoci5zdGF0dXMgKyAnLWpzb24nLCB4aHIucmVzcG9uc2VEYXRhLCB1cmwsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbGxCYWNrKSB7IGNhbGxCYWNrKCB4aHIucmVzcG9uc2VEYXRhIHx8IHhoci5yZXNwb25zZVRleHQgKX07XG4gICAgICAgIH0sIGZ1bmN0aW9uKHhocikge1xuICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZURhdGEpe1xuICAgICAgICAgICAgICAgIHRocy5ldmVudHMuZW1pdCgnZXJyb3ItanNvbicsIHhoci5yZXNwb25zZURhdGEsIHhoci5zdGF0dXMsIHVybCwgZGF0YSwgeGhyKTtcbiAgICAgICAgICAgICAgICB0aHMuZXZlbnRzLmVtaXQoJ2Vycm9yLWpzb24tJyArIHhoci5zdGF0dXMsIHhoci5yZXNwb25zZURhdGEsdXJsLCBkYXRhLCB4aHIpO1xuICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhzLmV2ZW50cy5lbWl0KCdlcnJvci1odHRwJyx4aHIucmVzcG9uc2VUZXh0LCB4aHIuc3RhdHVzLHVybCxkYXRhLHhocik7XG4gICAgICAgICAgICAgICAgdGhzLmV2ZW50cy5lbWl0KCdlcnJvci1odHRwLScgKyB4aHIuc3RhdHVzLCB4aHIucmVzcG9uc2VUZXh0LHVybCxkYXRhLHhocik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufTtcbnJlV2hlZWxDb25uZWN0aW9uLnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCl7XG4gICAgdmFyIHVybCA9IHRoaXMub3B0aW9ucy5lbmRQb2ludCArICdhcGkvbG9naW4nO1xuICAgIHZhciBjb25uZWN0aW9uID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LHJlamVjdCl7XG4gICAgICAgIHV0aWxzLnhkcih1cmwseyB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkIDogcGFzc3dvcmR9LCBudWxsLGNvbm5lY3Rpb24ub3B0aW9ucy50b2tlbiwgdHJ1ZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHhocil7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5yZXNwb25zZURhdGE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCBpbiBzdGF0dXMpeyBjb25uZWN0aW9uLm9wdGlvbnNbeF0gPSBzdGF0dXNbeF07IH1cbiAgICAgICAgICAgICAgICBhY2NlcHQoc3RhdHVzKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHhocil7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZURhdGEgfHwgcmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH0pO1xuLyogICAgICAgICQuYWpheCh7XG4vLyAgICAgICAgICAgIGhlYWRlcnMgOiBoZWFkZXJzLFxuICAgICAgICAgICAgdXJsIDogdXJsLFxuICAgICAgICAgICAgZGF0YSA6IHsgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZCA6IHBhc3N3b3JkfSxcbiAgICAgICAgICAgIGRhdGFUeXBlIDogJ2pzb24nLFxuICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuLy8gICAgICAgICAgICBjb250ZW50VHlwZSA6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIG1pbWVUeXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgY3Jvc3NEb21haW4gOiB0cnVlLFxuICAgICAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uKHN0YXR1cyl7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCBpbiBzdGF0dXMpeyBjb25uZWN0aW9uLm9wdGlvbnNbeF0gPSBzdGF0dXNbeF07IH1cbiAgICAgICAgICAgICAgICBhY2NlcHQoc3RhdHVzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvciA6IGZ1bmN0aW9uKHhocixkYXRhLCBzdGF0dXMpe1xuICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2VKU09OKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuKi9cbiAgICB9KTtcbn07XG5yZVdoZWVsQ29ubmVjdGlvbi5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uKGNhbGxCYWNrKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHdzY29ubmVjdCA9IGZ1bmN0aW9uKHNlbGYpe1xuICAgICAgICBzZWxmLndzQ29ubmVjdGlvbiA9IG5ldyB1dGlscy53c0Nvbm5lY3Qoc2VsZi5vcHRpb25zKTtcbiAgICAgICAgc2VsZi53c0Nvbm5lY3Rpb24ub25Db25uZWN0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWxmLmV2ZW50cy5lbWl0KCd3cy1jb25uZWN0ZWQnLCBzZWxmLndzQ29ubmVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLndzQ29ubmVjdGlvbi5vbkRpc2Nvbm5lY3QoZnVuY3Rpb24oKXsgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgd3Njb25uZWN0KHNlbGYpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sMTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0YXR1cyhmdW5jdGlvbihzdGF0dXMpe1xuICAgICAgICBpZiAoJ3Rva2VuJyBpbiBzZWxmLm9wdGlvbnMpe1xuICAgICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2soc3RhdHVzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25uZWN0aW5nIHRvICcgKyBzZWxmLm9wdGlvbnMuZW5kUG9pbnQpO1xuICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy51c2VybmFtZSAmJiBzZWxmLm9wdGlvbnMucGFzc3dvcmQpe1xuICAgICAgICAgICAgICAgIHNlbGYubG9naW4oXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxCYWNrICYmIGNhbGxCYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbmV3aW5nIGNvbm5lY3Rpb24nKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0dXMudG9rZW4gJiYgc3RhdHVzLnJlYWx0aW1lRW5kUG9pbnQgJiYgKCFzZWxmLndzQ29ubmVjdGlvbikpe1xuICAgICAgICAgICAgd3Njb25uZWN0KHNlbGYpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgdXRpbHMgPSB7XG4gICAgcmVuYW1lRnVuY3Rpb24gOiBmdW5jdGlvbiAobmFtZSwgZm4pIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRnVuY3Rpb24oXCJyZXR1cm4gZnVuY3Rpb24gKGNhbGwpIHsgcmV0dXJuIGZ1bmN0aW9uIFwiICsgbmFtZSArXG4gICAgICAgICAgICBcIiAoKSB7IHJldHVybiBjYWxsKHRoaXMsIGFyZ3VtZW50cykgfTsgfTtcIikoKSkoRnVuY3Rpb24uYXBwbHkuYmluZChmbikpO1xuICAgIH0sXG4gICAgY2FjaGVkIDogZnVuY3Rpb24oZnVuYywga2V5KXtcbiAgICAgICAgaWYgKCFrZXkpeyAgICBcbiAgICAgICAgICAgIGtleSA9ICdfJyArIGNhY2hlZEtleUlkeCsrO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKXtcbiAgICAgICAgICAgIGlmICghdGhpc1trZXldKXtcbiAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSBmdW5jLmNhbGwodGhpcyxbYXJndW1lbnRzXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpc1trZXldO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9LFxuICAgICRQT1NUIDogJFBPU1QsXG4gICAgcmVXaGVlbENvbm5lY3Rpb246IHJlV2hlZWxDb25uZWN0aW9uLFxuICAgIGxvZzogZnVuY3Rpb24oKXsgXG4gICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIHhkcjogZnVuY3Rpb24gKHVybCwgZGF0YSwgYXBwbGljYXRpb24sdG9rZW4sIGZvcm1FbmNvZGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ha2UgYW4gSFRUUCBSZXF1ZXN0IGFuZCByZXR1cm4gaXRzIHByb21pc2UuXG4gICAgICAgICAqL1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciByZXE7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIHsgZGF0YSA9IHt9O31cblxuICAgICAgICAgICAgaWYoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZURhdGEgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB7cmVzcG9uc2VEYXRhOiByZXNwb25zZURhdGEsIHJlc3BvbnNlVGV4dDogcmVxLnJlc3BvbnNlVGV4dCxzdGF0dXM6IHJlcS5zdGF0dXNUZXh0LCByZXF1ZXN0OiByZXF9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gMjAwICYmIHJlcS5zdGF0dXMgPCA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihYRG9tYWluUmVxdWVzdCl7XG4gICAgICAgICAgICAgICAgcmVxID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgcmVxLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBhY2NlcHQocmVxLnJlc3BvbnNlVGV4dCxyZXEuc3RhdHVzVGV4dCwgcmVxKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdDT1JTIG5vdCBzdXBwb3J0ZWQnKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcS5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgICAgIGlmICh0b2tlbikgeyBkYXRhLl9fdG9rZW5fXyA9IHRva2VuIH1cbiAgICAgICAgICAgIGlmICghZm9ybUVuY29kZSl7XG4gICAgICAgICAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgICAgICAgICBkYXRhID0gTGF6eShkYXRhKS5zaXplKCk/SlNPTi5zdHJpbmdpZnkoZGF0YSk6Jyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICAgICAgICAgICAgICBkYXRhID0gTGF6eShkYXRhKS5tYXAoZnVuY3Rpb24odixrKXtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBrICsgJz0nICsgZW5jb2RlVVJJKHYudG9TdHJpbmcoKSk7ICBcbiAgICAgICAgICAgICAgICB9KS50b0FycmF5KCkuam9pbignJicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnNlbmQoZGF0YSk7XG4gICAgLy8gICAgICAgIHJlcS5zZW5kKG51bGwpO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgXG4gICAgY2FwaXRhbGl6ZSA6IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHJldHVybiBzWzBdLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcblxuICAgIGhhc2ggOiBmdW5jdGlvbihzdHIpe1xuICAgICAgICAvKipcbiAgICAgICAgICogSGFzaGVkIGZ1bmN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzdHIgPSBzdHIudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHJldCA9IDE7XG4gICAgICAgIGZvciAodmFyIHggPSAwO3g8c3RyLmxlbmd0aDt4Kyspe1xuICAgICAgICAgICAgcmV0ICo9ICgxICsgc3RyLmNoYXJDb2RlQXQoeCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmV0ICUgMzQ5NTgzNzQ5NTcpLnRvU3RyaW5nKCk7XG4gICAgfSxcblxuICAgIG1ha2VGaWx0ZXIgOiBmdW5jdGlvbiAobW9kZWwsIGZpbHRlciwgdW5pZmllciwgZG9udFRyYW5zbGF0ZUZpbHRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZSBmaWx0ZXIgZm9yIEFycmF5LmZpbHRlciBmdW5jdGlvbiBhcyBhbiBhbmQgb2Ygb3JcbiAgICAgICAgICovXG4gICAgICAgIGlmICghdW5pZmllcikgeyB1bmlmaWVyID0gJyAmJiAnO31cbiAgICAgICAgaWYgKExhenkoZmlsdGVyKS5zaXplKCkgPT09IDApe1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHgpeyByZXR1cm4gdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2UgPSBMYXp5KGZpbHRlcikubWFwKGZ1bmN0aW9uKHZhbHMsIGZpZWxkKXtcbiAgICAgICAgICAgIGlmICghdmFscykgeyB2YWxzID0gW251bGxdfVxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHMpKXtcbiAgICAgICAgICAgICAgICB2YWxzID0gW3ZhbHNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkb250VHJhbnNsYXRlRmlsdGVyICYmIChtb2RlbC5maWVsZHNbZmllbGRdLnR5cGUgPT09ICdyZWZlcmVuY2UnKSkge1xuICAgICAgICAgICAgICAgIGZpZWxkID0gJ18nICsgZmllbGQ7XG4gICAgICAgICAgICAgICAgdmFscyA9IExhenkodmFscykubWFwKGZ1bmN0aW9uKHgpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoeCAmJiAoeC5jb25zdHJ1Y3RvciAhPT0gTnVtYmVyKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICAgICAgfSkudG9BcnJheSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbC5maWVsZHNbZmllbGRdLnR5cGUgPT09ICdzdHJpbmcnKXtcbiAgICAgICAgICAgICAgICB2YWxzID0gdmFscy5tYXAoSlNPTi5zdHJpbmdpZnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcoJyArICBMYXp5KHZhbHMpLm1hcChmdW5jdGlvbih4KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyh4LicgKyBmaWVsZCArICcgPT09ICcgKyB4ICsgJyknO1xuICAgICAgICAgICAgfSkuam9pbignIHx8ICcpICArJyknO1xuICAgICAgICB9KS50b0FycmF5KCkuam9pbih1bmlmaWVyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcInhcIiwgXCJyZXR1cm4gXCIgKyBzb3VyY2UpO1xuICAgIH0sXG5cbiAgICBzYW1lQXMgOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVlcCBlcXVhbFxuICAgICAgICAgKi9cbiAgICAgICAgZm9yICh2YXIgayBpbiB4KSB7XG4gICAgICAgICAgICBpZiAoeVtrXSAhPSB4W2tdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cblxuICAgIHdzQ29ubmVjdCA6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25uZWN0cyBhIHdlYnNvY2tldCB3aXRoIHJlV2hlZWwgY29ubmVjdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgaWYoIW9wdGlvbnMpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIC8vIHJlZ2lzdGVyaW5nIGFsbCBldmVudCBoYW5kbGVyc1xuXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICB3aXphcmQgOiBuZXcgSGFuZGxlcigpLFxuICAgICAgICAgICAgb25Db25uZWN0aW9uIDogbmV3IEhhbmRsZXIoKSxcbiAgICAgICAgICAgIG9uRGlzY29ubmVjdGlvbiA6IG5ldyBIYW5kbGVyKCksXG4gICAgICAgICAgICBvbk1lc3NhZ2VKc29uIDogbmV3IEhhbmRsZXIoKSxcbiAgICAgICAgICAgIG9uTWVzc2FnZVRleHQgOiBuZXcgSGFuZGxlcigpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbldpemFyZCA9IHRoaXMuaGFuZGxlcnMud2l6YXJkLmFkZEhhbmRsZXIuYmluZCh0aGlzLmhhbmRsZXJzLndpemFyZCk7XG4gICAgICAgIHRoaXMub25Db25uZWN0ID0gdGhpcy5oYW5kbGVycy5vbkNvbm5lY3Rpb24uYWRkSGFuZGxlci5iaW5kKHRoaXMuaGFuZGxlcnMub25Db25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QgPSB0aGlzLmhhbmRsZXJzLm9uRGlzY29ubmVjdGlvbi5hZGRIYW5kbGVyLmJpbmQodGhpcy5oYW5kbGVycy5vbkRpc2Nvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLm9uTWVzc2FnZUpzb24gPSB0aGlzLmhhbmRsZXJzLm9uTWVzc2FnZUpzb24uYWRkSGFuZGxlci5iaW5kKHRoaXMuaGFuZGxlcnMub25NZXNzYWdlSnNvbik7XG4gICAgICAgIHRoaXMub25NZXNzYWdlVGV4dCA9IHRoaXMuaGFuZGxlcnMub25NZXNzYWdlVGV4dC5hZGRIYW5kbGVyLmJpbmQodGhpcy5oYW5kbGVycy5vbk1lc3NhZ2VUZXh0KTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG5cbiAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgU29ja0pTKG9wdGlvbnMucmVhbHRpbWVFbmRQb2ludCk7XG4gICAgICAgIGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvcGVuIDogJyArIHgpO1xuICAgICAgICAgICAgY29ubmVjdGlvbi50ZW5hbnQoKTtcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlcnMub25Db25uZWN0aW9uLmhhbmRsZSh4KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgaWYgKHgudHlwZSA9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAvLyQubm90aWZ5KHguZGF0YSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIHNldCBmcm9tUmVhbHRpbWVcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVycy5vbk1lc3NhZ2VKc29uLmhhbmRsZShKU09OLnBhcnNlKHguZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gdW5zZXQgZnJvbVJlYWx0aW1lXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlcnMub25NZXNzYWdlVGV4dC5oYW5kbGUoeC5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHV0aWxzLndzQ29ubmVjdCwxMDAwKTtcbiAgICAgICAgICAgIHNlbGYuaGFuZGxlcnMub25EaXNjb25uZWN0aW9uLmhhbmRsZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25uZWN0aW9uLnRlbmFudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZCgnVEVOQU5UOicgKyBzZWxmLm9wdGlvbnMuYXBwbGljYXRpb24gKyAnOicgKyBzZWxmLm9wdGlvbnMudG9rZW4pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHBsdXJhbGl6ZSA6IGZ1bmN0aW9uKHN0ciwgbW9kZWwpe1xuICAgICAgICAvKipcbiAgICAgICAgICogTGV4aWNhbGx5IHJldHVybnMgZW5nbGlzaCBwbHVyYWwgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuIHN0ciArICdzJztcbiAgICB9LFxuXG4gICAgYmVmb3JlQ2FsbCA6IGZ1bmN0aW9uKGZ1bmMsIGJlZm9yZSl7XG4gICAgICAgIHZhciBkZWNvcmF0b3IgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgYmVmb3JlKCkudGhlbihmdW5jKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGVjb3JhdG9yO1xuICAgIH0sXG5cbiAgICBjbGVhblN0b3JhZ2UgOiBmdW5jdGlvbigpe1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYW4gbG9jYWxTdG9yYWdlIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgTGF6eShsb2NhbFN0b3JhZ2UpLmtleXMoKS5lYWNoKGZ1bmN0aW9uKGspe1xuICAgICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtrXTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIFxuICAgIHJldmVyc2UgOiBmdW5jdGlvbiAoY2hyLCBzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChjaHIpLnJldmVyc2UoKS5qb2luKGNocik7XG4gICAgfSxcbiAgICBwZXJtdXRhdGlvbnM6IGZ1bmN0aW9uKGFycil7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgeCA9IGFyci5sZW5ndGgtMTsgeCA+PSAwO3gtLSl7XG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gYXJyLmxlbmd0aC0xOyB5ID49IDA7IHktLSl7XG4gICAgICAgICAgICAgICAgaWYgKHggIT09IHkpXG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKFthcnJbeF0sIGFyclt5XV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIGJvb2w6IEJvb2xlYW4sXG5cbiAgICBub29wIDogZnVuY3Rpb24oKXt9LFxuXG4gICAgdHpPZmZzZXQ6IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwXG59O1xuXG5cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gVG91Y2hlcigpe1xuICAgIHZhciB0b3VjaGVkID0gZmFsc2VcbiAgICB0aGlzLnRvdWNoID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdG91Y2hlZCA9IHRydWU7XG4gICAgfTtcbiAgICB0aGlzLnRvdWNoZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdCA9IHRvdWNoZWQ7XG4gICAgICAgIHRvdWNoZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbmZ1bmN0aW9uIFZhY3V1bUNhY2hlcih0b3VjaCwgYXNrZWQsIG5hbWUpe1xuLypcbiAgICBpZiAobmFtZSl7XG4gICAgICAgIGNvbnNvbGUuaW5mbygnY3JlYXRlZCBWYWN1dW1DYWNoZXIgYXMgJyArIG5hbWUpO1xuICAgIH1cbiovXG4gICAgaWYgKCFhc2tlZCl7XG4gICAgICAgIHZhciBhc2tlZCA9IFtdO1xuICAgIH1cbiAgICB2YXIgbWlzc2luZyA9IFtdO1xuICAgIFxuICAgIHRoaXMuYXNrID0gZnVuY3Rpb24gKGlkLGxhenkpe1xuICAgICAgICBpZiAoIUxhenkoYXNrZWQpLmNvbnRhaW5zKGlkKSl7XG4vLyAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnYXNraW5nICgnICsgaWQgKyAnKSBmcm9tICcgKyBuYW1lKTtcbiAgICAgICAgICAgIG1pc3NpbmcucHVzaChpZCk7XG4gICAgICAgICAgICBpZiAoIWxhenkpXG4gICAgICAgICAgICAgICAgYXNrZWQucHVzaChpZCk7XG4gICAgICAgICAgICB0b3VjaC50b3VjaCgpO1xuICAgICAgICB9IFxuLy8gICAgICAgIGVsc2UgY29uc29sZS53YXJuKCcoJyArIGlkICsgJykgd2FzIGp1c3QgYXNrZWQgb24gJyArIG5hbWUpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldEFza2VkSW5kZXggPSBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gYXNrZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5taXNzaW5ncyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBMYXp5KG1pc3Npbmcuc3BsaWNlKDAsbWlzc2luZy5sZW5ndGgpKS51bmlxdWUoKS50b0FycmF5KCk7XG4gICAgfVxufVxuIiwiZnVuY3Rpb24gQXV0b0xpbmtlcihldmVudHMsIGFjdGl2ZXMsIElEQiwgVzJQUkVTT1VSQ0UsIGxpc3RDYWNoZSl7XG4gICAgdmFyIHRvdWNoID0gbmV3IFRvdWNoZXIoKTtcbiAgICB2YXIgbWFpbkluZGV4ID0ge307XG4gICAgdmFyIGZvcmVpZ25LZXlzID0ge307XG4gICAgdmFyIG0ybSA9IHt9O1xuICAgIHZhciBtMm1JbmRleCA9IHt9O1xuICAgIHZhciBwZXJtaXNzaW9ucyA9IHt9O1xuICAgIHRoaXMubWFpbkluZGV4ID0gbWFpbkluZGV4O1xuICAgIHRoaXMuZm9yZWlnbktleXMgPSBmb3JlaWduS2V5cztcbiAgICB0aGlzLm0ybSA9IG0ybTtcbiAgICB0aGlzLm0ybUluZGV4ID0gbTJtSW5kZXg7XG4gICAgdGhpcy5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb25zO1xuXG4gICAgZXZlbnRzLm9uKCdtb2RlbC1kZWZpbml0aW9uJyxmdW5jdGlvbihtb2RlbCl7XG4gICAgICAgIC8vIGRlZmluaW5nIGFsbCBpbmRleGVzIGZvciBwcmltYXJ5IGtleVxuICAgICAgICB2YXIgcGtJbmRleCA9IGxpc3RDYWNoZS5nZXRJbmRleEZvcihtb2RlbC5uYW1lLCAnaWQnKTtcbiAgICAgICAgbWFpbkluZGV4W21vZGVsLm5hbWVdID0gbmV3IFZhY3V1bUNhY2hlcih0b3VjaCwgcGtJbmRleCwgJ21haW5JbmRleC4nICsgbW9kZWwubmFtZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBjcmVhdGluZyBwZXJtaXNzaW9uIGluZGV4ZXNcbiAgICAgICAgcGVybWlzc2lvbnNbbW9kZWwubmFtZV0gPSBuZXcgVmFjdXVtQ2FjaGVyKHRvdWNoLG51bGwsICdwZXJtaXNzaW9ucy4nICsgbW9kZWwubmFtZSk7XG5cbiAgICAgICAgLy8gY3JlYXRpbmcgaW5kZXhlcyBmb3IgZm9yZWlnbiBrZXlzXG4gICAgICAgIExhenkobW9kZWwucmVmZXJlbmNlcykuZWFjaChmdW5jdGlvbihyZWZlcmVuY2Upe1xuICAgICAgICAgICAgdmFyIGluZGV4TmFtZSA9IG1vZGVsLm5hbWUgKyAnXycgKyByZWZlcmVuY2UuaWQ7XG4gICAgICAgICAgICBmb3JlaWduS2V5c1tpbmRleE5hbWVdID0gbmV3IFZhY3V1bUNhY2hlcih0b3VjaCwgbGlzdENhY2hlLmdldEluZGV4Rm9yKHJlZmVyZW5jZS50bywgJ2lkJyksIHJlZmVyZW5jZS50byArICcuaWQgZm9yZWlnbktleXMuJyArIGluZGV4TmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjcmVhdGluZyByZXZlcnNlIGZvcmVpZ24ga2V5c1xuICAgICAgICBMYXp5KG1vZGVsLnJlZmVyZW5jZWRCeSkuZWFjaChmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gZmllbGQuYnkgKyAnLicgKyBmaWVsZC5pZDtcbiAgICAgICAgICAgIGZvcmVpZ25LZXlzW2luZGV4TmFtZV0gPSBuZXcgVmFjdXVtQ2FjaGVyKHRvdWNoLCBsaXN0Q2FjaGUuZ2V0SW5kZXhGb3IoZmllbGQuYnksZmllbGQuaWQpLCBmaWVsZC5ieSArICcuJyArIGZpZWxkLmlkICsgJyBmb3JlaWduS2V5cy4nICsgaW5kZXhOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIExhenkobW9kZWwubWFueVRvTWFueSkuZWFjaChmdW5jdGlvbihyZWxhdGlvbil7XG4gICAgICAgICAgICBpZiAoIShyZWxhdGlvbi5pbmRleE5hbWUgaW4gbTJtKSlcbiAgICAgICAgICAgICAgICBtMm1bcmVsYXRpb24uaW5kZXhOYW1lXSA9IFtuZXcgVmFjdXVtQ2FjaGVyKHRvdWNoLG51bGwsJ20ybS4nICsgcmVsYXRpb24uaW5kZXhOYW1lICsgJ1swXScpLCBuZXcgVmFjdXVtQ2FjaGVyKHRvdWNoLG51bGwsJ20ybS4nICsgcmVsYXRpb24uaW5kZXhOYW1lKydbMV0nKV07XG4gICAgICAgICAgICBpZiAoIShyZWxhdGlvbi5pbmRleE5hbWUgaW4gbTJtSW5kZXgpKVxuICAgICAgICAgICAgICAgIG0ybUluZGV4W3JlbGF0aW9uLmluZGV4TmFtZV0gPSBuZXcgTWFueVRvTWFueVJlbGF0aW9uKHJlbGF0aW9uLG0ybVtyZWxhdGlvbi5pbmRleE5hbWVdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgdmFyIG0ybUdldCA9IGZ1bmN0aW9uKGluZGV4TmFtZSwgbiwgY29sbGVjdGlvbiwgY2FsbEJhY2spe1xuICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdCgobiA/IHV0aWxzLnJldmVyc2UoJy8nLCBpbmRleE5hbWUpIDogaW5kZXhOYW1lKSArICdzJyArICcvbGlzdCcsIHtjb2xsZWN0aW9uOiBjb2xsZWN0aW9ufSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBXMlBSRVNPVVJDRS5nb3REYXRhKGRhdGEsIGNhbGxCYWNrKTtcbiAgICAgICAgICAgIGRlbGV0ZSBhY3RpdmVzW2luZGV4TmFtZV1cbiAgICAgICAgfSk7ICAgICAgICBcbiAgICB9O1xuXG4gICAgdmFyIGdldE0yTSA9IGZ1bmN0aW9uKGluZGV4TmFtZSwgY29sbGVjdGlvbiwgbiwgY2FsbEJhY2spe1xuICAgICAgICAvLyBhc2sgYWxsIGl0ZW1zIGluIGNvbGxlY3Rpb24gdG8gbTJtIGluZGV4XG4gICAgICAgIExhenkoY29sbGVjdGlvbikuZWFjaChtMm1baW5kZXhOYW1lXVtuXS5hc2suYmluZChtMm1baW5kZXhOYW1lXVtuXSkpO1xuICAgICAgICAvLyByZW5ld2luZyBjb2xsZWN0aW9uIHdpdGhvdXQgYXNrZWRcbiAgICAgICAgY29sbGVjdGlvbiA9IG0ybVtpbmRleE5hbWVdW25dLm1pc3NpbmdzKCk7XG4gICAgICAgIC8vIGNhbGxpbmcgcmVtb3RlIGZvciBtMm0gY29sbGVjdGlvbiBpZiBhbnlcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24ubGVuZ3RoKXtcbiAgICAgICAgICAgIGFjdGl2ZXNbaW5kZXhOYW1lXSA9IDE7XG4gICAgICAgICAgICBtMm1HZXQoaW5kZXhOYW1lLCBuLCBjb2xsZWN0aW9uLCBjYWxsQmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsQmFjayAmJiBjYWxsQmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmdldE0yTSA9IGdldE0yTTtcblxuICAgIHZhciBsaW5rVW5saW5rZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAvLyBwZXJmb3JtIGEgRGF0YUJhc2Ugc3luY2hyb25pemF0aW9uIHdpdGggc2VydmVyIGxvb2tpbmcgZm9yIHVua25vd24gZGF0YVxuICAgICAgICBpZiAoIXRvdWNoLnRvdWNoZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoTGF6eShhY3RpdmVzKS52YWx1ZXMoKS5zdW0oKSkge1xuICAgICAgICAgICAgdG91Y2gudG91Y2goKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBMYXp5KG0ybSkuZWFjaChmdW5jdGlvbihpbmRleGVzLCBpbmRleE5hbWUpe1xuICAgICAgICAgICAgTGF6eShpbmRleGVzKS5lYWNoKGZ1bmN0aW9uIChpbmRleCxuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBpbmRleC5taXNzaW5ncygpO1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBMYXp5KGNvbGxlY3Rpb24pLmZpbHRlcihCb29sZWFuKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHgpXG4gICAgICAgICAgICAgICAgfSkudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBJTkRFWCA9IG0ybUluZGV4W2luZGV4TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBnZXR0ZXIgPSBJTkRFWFsnZ2V0JyArICgxIC0gbildLmJpbmQoSU5ERVgpO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbTJtR2V0KGluZGV4TmFtZSwgbiwgY29sbGVjdGlvbiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gY29sbGVjdGlvbi5tYXAoZ2V0dGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJJbmRleCA9IGluZGV4TmFtZS5zcGxpdCgnLycpWzEgLSBuXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS5kZXNjcmliZShvdGhlckluZGV4LGZ1bmN0aW9uKCl7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF6eShpZHMpLmZsYXR0ZW4oKS51bmlxdWUoKS5lYWNoKG1haW5JbmRleFtvdGhlckluZGV4XS5hc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMYXp5KGlkcykuZmxhdHRlbigpLnVuaXF1ZSgpLmVhY2goZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWluSW5kZXhbb3RoZXJJbmRleF0uYXNrKHgsdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIExhenkobWFpbkluZGV4KS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgbW9kZWxOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaWRzID0gaW5kZXgubWlzc2luZ3MoKTtcbiAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIGlkYiA9IG1vZGVsTmFtZSBpbiBJREIgPyBJREJbbW9kZWxOYW1lXS5rZXlzKCkgOiBMYXp5KCk7XG4gICAgICAgICAgICAgICAgLy9sb2coJ2xpbmtpbmcuJyArIG1vZGVsTmFtZSArICcgPSAnICsgVzJQUkVTT1VSQ0UubGlua2luZy5zb3VyY2VbbW9kZWxOYW1lXSk7XG4gICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuZmV0Y2gobW9kZWxOYW1lLCB7aWQ6IGlkc30sbnVsbCx1dGlscy5ub29wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZvcmVpZ24ga2V5c1xuICAgICAgICBMYXp5KGZvcmVpZ25LZXlzKVxuICAgICAgICAubWFwKGZ1bmN0aW9uKHYsayl7XG4gICAgICAgICAgICByZXR1cm4gW2ssIHYubWlzc2luZ3MoKV1cbiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKHYpe1xuICAgICAgICAgICAgcmV0dXJuIHZbMV0ubGVuZ3RoXG4gICAgICAgIH0pLmVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGlkcyA9IHhbMV07XG4gICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0geFswXTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGV4TmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIG1haW5SZXNvdXJjZSA9IGluZGV4WzBdO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGluZGV4WzFdO1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9IHt9O1xuICAgICAgICAgICAgZmlsdGVyW2ZpZWxkTmFtZV0gPSBpZHM7XG4gICAgICAgICAgICBXMlBSRVNPVVJDRS5mZXRjaChtYWluUmVzb3VyY2UsIGZpbHRlcik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgTGF6eShMYXp5KHBlcm1pc3Npb25zKS5tYXAoZnVuY3Rpb24odixrKXtcbiAgICAgICAgICAgIHJldHVybiBbaywgdi5taXNzaW5ncygpXVxuICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2WzFdLmxlbmd0aFxuICAgICAgICB9KS50b09iamVjdCgpKS5lYWNoKGZ1bmN0aW9uIChpZHMsIHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgYWN0aXZlc1tyZXNvdXJjZU5hbWVdID0gMTtcbiAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdChyZXNvdXJjZU5hbWUgKyAnL215X3Blcm1zJywge2lkczogTGF6eShpZHMpLnVuaXF1ZSgpLnRvQXJyYXkoKX0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmdvdFBlcm1pc3Npb25zKGRhdGEuUEVSTUlTU0lPTlMpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYWN0aXZlc1tyZXNvdXJjZU5hbWVdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRJbnRlcnZhbChsaW5rVW5saW5rZWQsNTApO1xufTtcblxuXG4iLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gTGlzdENhY2hlcigpe1xuICAgIHZhciBnb3RBbGwgPSB7fTtcbiAgICB2YXIgYXNrZWQgPSB7fTsgLy8gbWFwIG9mIGFycmF5XG4gICAgdmFyIGNvbXBvc2l0ZUFza2VkID0ge307XG4gICAgdmFyIGNhcnRlc2lhblByb2R1Y3QxID0gZnVuY3Rpb24oeCx5LGlzQXJyYXkpe1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhIGluIHgpe1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGIgaW4geSl7XG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKExhenkoW3hbYV0seVtiXV0pLmZsYXR0ZW4oKS50b0FycmF5KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGEgaW4geCl7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiB5KXtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goW3hbYV0seVtiXV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgdmFyIGNhcnRlc2lhblByb2R1Y3QgPSBmdW5jdGlvbihhcnIpe1xuICAgICAgICB2YXIgaXNBcnJheSA9IGZhbHNlO1xuICAgICAgICB2YXIgcmV0ID0gYXJyWzBdOyBcbiAgICAgICAgZm9yICh2YXIgeCA9IDE7IHggPCBhcnIubGVuZ3RoOyArK3gpe1xuICAgICAgICAgICAgcmV0ID0gY2FydGVzaWFuUHJvZHVjdDEocmV0LCBhcnJbeF0sIGlzQXJyYXkpO1xuICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgdmFyIGV4cGxvZGVGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpIHtcbiAgICAgICAgdmFyIHByb2R1Y3QgPSBjYXJ0ZXNpYW5Qcm9kdWN0KExhenkoZmlsdGVyKS52YWx1ZXMoKS50b0FycmF5KCkpO1xuICAgICAgICB2YXIga2V5cyA9IExhenkoZmlsdGVyKS5rZXlzKCkudG9BcnJheSgpO1xuICAgICAgICByZXR1cm4gcHJvZHVjdC5tYXAoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGEsbil7XG4gICAgICAgICAgICAgICAgclthXSA9IHhbbl07XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9O1xuICAgIHZhciBmaWx0ZXJTaW5nbGUgPSBmdW5jdGlvbihtb2RlbCwgZmlsdGVyLCB0ZXN0T25seSl7XG4gICAgICAgIC8vIExhenkgYXV0byBjcmVhdGUgaW5kZXhlc1xuICAgICAgICB2YXIgbW9kZWxOYW1lID0gbW9kZWwubW9kZWxOYW1lO1xuICAgICAgICB2YXIgZ2V0SW5kZXhGb3IgPSB0aGlzLmdldEluZGV4Rm9yO1xuICAgICAgICB2YXIga2V5cyA9IExhenkoZmlsdGVyKS5tYXAoZnVuY3Rpb24odixrZXkpeyByZXR1cm4gW2tleSwgbW9kZWxOYW1lICsgJy4nICsga2V5XTsgfSkudG9PYmplY3QoKTtcbiAgICAgICAgdmFyIGluZGV4ZXMgPSBMYXp5KGZpbHRlcikua2V5cygpLm1hcChmdW5jdGlvbihrZXkpeyByZXR1cm4gW2tleSwgZ2V0SW5kZXhGb3IobW9kZWxOYW1lLCBrZXkpXX0pLnRvT2JqZWN0KCk7IFxuICAgICAgICAvLyBmYWtlIGZvciAoaXQgd2lsbCBjeWNsZSBvbmNlKVxuICAgICAgICBmb3IgKHZhciB4IGluIGZpbHRlcil7XG4gICAgICAgICAgICAvLyBnZXQgYXNrZWQgaW5kZXggYW5kIGNoZWNrIHByZXNlbmNlXG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IExhenkoZmlsdGVyW3hdKS5kaWZmZXJlbmNlKGluZGV4ZXNbeF0pLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgbmV3IGZpbHRlclxuICAgICAgICAgICAgICAgIHZhciByZXQgPSBMYXp5KFtbeCwgZGlmZmVyZW5jZV1dKS50b09iamVjdCgpO1xuICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGFza2VkXG4gICAgICAgICAgICAgICAgaWYgKCF0ZXN0T25seSlcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoaW5kZXhlc1t4XSwgZGlmZmVyZW5jZSk7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2luZ2xlIGZpbHRlciA6ICcgKyBKU09OLnN0cmluZ2lmeShmaWx0ZXIpICsgJ1xcbk91dCA6JyArIEpTT04uc3RyaW5naWZ5KHJldCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpbmdsZSBmaWx0ZXIgOiAnICsgSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSArICdcXG5PdXQgOiBudWxsJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGNsZWFuQ29tcG9zaXRlcyA9IGZ1bmN0aW9uKG1vZGVsLGZpbHRlcil7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjbGVhbiBjb21wb3NpdGVBc2tlZFxuICAgICAgICAgKi9cbiAgICAgICAgLy8gbGF6eSBjcmVhdGUgY29uZGl0aW9uYWwgYXNrZWQgaW5kZXhcbiAgICAgICAgaWYgKCEobW9kZWwubmFtZSBpbiBjb21wb3NpdGVBc2tlZCkpIHsgY29tcG9zaXRlQXNrZWRbbW9kZWwubmFtZV0gPSBbXSB9O1xuICAgICAgICB2YXIgaW5kZXggPSBjb21wb3NpdGVBc2tlZFttb2RlbC5uYW1lXTtcbiAgICAgICAgLy8gc2VhcmNoIGZvciBhbGwgZWxlbWVudHMgd2hvIGhhdmUgc2FtZSBwYXJ0aWFsXG4gICAgICAgIHZhciBmaWx0ZXJMZW4gPSBMYXp5KGZpbHRlcikuc2l6ZSgpO1xuICAgICAgICB2YXIgaXRlbXMgPSBpbmRleC5maWx0ZXIodXRpbHMubWFrZUZpbHRlcihtb2RlbCwgZmlsdGVyLCAnICYmICcsdHJ1ZSkpLmZpbHRlcihmdW5jdGlvbihpdGVtKXsgTGF6eShpdGVtKS5zaXplKCkgPiBmaWx0ZXJMZW4gfSk7XG4vLyAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0aW5nIDonICsgSlNPTi5zdHJpbmdpZnkoaXRlbXMpKTtcbiAgICB9O1xuXG4gICAgdGhpcy5maWx0ZXIgPSBmdW5jdGlvbihtb2RlbCwgZmlsdGVyKXtcbi8vICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tXFxuZmlsdGVyIDogJyArIEpTT04uc3RyaW5naWZ5KGZpbHRlcikpO1xuICAgICAgICB2YXIgbW9kZWxOYW1lID0gbW9kZWwubW9kZWxOYW1lO1xuXG4gICAgICAgIC8vIGlmIHlvdSBmZXRjaCBhbGwgb2JqZWN0cyBmcm9tIHNlcnZlciwgdGhpcyBtb2RlbCBoYXMgdG8gYmUgbWFya2VkIGFzIGdvdCBhbGw7XG4gICAgICAgIHZhciBmaWx0ZXJMZW4gID0gTGF6eShmaWx0ZXIpLnNpemUoKTtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXJMZW4pIHtcbiAgICAgICAgICAgIGNhc2UgMCA6IHtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gbnVsbCBvciBhbGxcbiAgICAgICAgICAgICAgICB2YXIgZ290ID0gZ290QWxsW21vZGVsTmFtZV07XG4gICAgICAgICAgICAgICAgZ290QWxsW21vZGVsTmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbE5hbWUgaW4gYXNrZWQpe1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXNrZWRbbW9kZWxOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb3V0IDogbnVsbCAoZ290IGFsbCknKTtcbiAgICAgICAgICAgICAgICAvLyBjb25kaXRpb25hbCBjbGVhblxuICAgICAgICAgICAgICAgIGlmIChtb2RlbE5hbWUgaW4gY29tcG9zaXRlQXNrZWQpeyBcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbXBvc2l0ZUFza2VkW21vZGVsTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnb3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMSA6IHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gZmlsdGVyU2luZ2xlLmNhbGwodGhpcywgbW9kZWwsIGZpbHRlcik7XG4gICAgICAgICAgICAgICAgY2xlYW5Db21wb3NpdGVzLmNhbGwodGhpcywgbW9kZWwsIGZpbHRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhzID0gdGhpcztcbiAgICAgICAgdmFyIHNpbmdsZSA9IExhenkoZmlsdGVyKS5rZXlzKCkuc29tZShmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIHZhciBmID0ge307XG4gICAgICAgICAgICBmW2tleV0gPSBmaWx0ZXJba2V5XTtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXJTaW5nbGUuY2FsbCh0aHMsIG1vZGVsLCBmLCB0cnVlKSA9PSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNpbmdsZSkgeyByZXR1cm4gbnVsbCB9XG4gICAgICAgIC8vIGxhenkgY3JlYXRlIGNvbXBvc2l0ZUFza2VkXG4gICAgICAgIGlmICghKG1vZGVsTmFtZSBpbiBjb21wb3NpdGVBc2tlZCkpeyBjb21wb3NpdGVBc2tlZFttb2RlbE5hbWVdID0gW107IH1cbiAgICAgICAgLy8gZXhwbG9kZSBmaWx0ZXJcbiAgICAgICAgdmFyIGV4cGxvZGVkID0gZXhwbG9kZUZpbHRlcihmaWx0ZXIpO1xuICAgICAgICAvLyBjb2xsZWN0IHBhcnRpYWxzXG4gICAgICAgIHZhciBwYXJ0aWFscyA9IGNvbXBvc2l0ZUFza2VkW21vZGVsTmFtZV0uZmlsdGVyKHV0aWxzLm1ha2VGaWx0ZXIobW9kZWwsIGZpbHRlciwgJyB8fCAnLHRydWUpKTtcbiAgICAgICAgLy8gY29sbGVjdCBtaXNzaW5ncyAoZXhwbG9kZWQgLSBwYXJ0aWFscylcbiAgICAgICAgaWYgKHBhcnRpYWxzLmxlbmd0aCl7XG4gICAgICAgICAgICB2YXIgYmFkICA9IFtdO1xuICAgICAgICAgICAgLy8gcGFydGlhbCBkaWZmZXJlbmNlXG4gICAgICAgICAgICBmb3IgKHZhciB4IGluIHBhcnRpYWxzKXtcbiAgICAgICAgICAgICAgICBiYWQucHVzaC5hcHBseShiYWQsZXhwbG9kZWQuZmlsdGVyKHV0aWxzLm1ha2VGaWx0ZXIobW9kZWwsIHBhcnRpYWxzW3hdLCcgJiYgJywgdHJ1ZSkpKTtcbiAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgY29uc29sZS5sb2coJ2V4cGxvZGVkIC0gcGFydGlhbCA6ICcgKyBKU09OLnN0cmluZ2lmeShiYWQpKTtcbiAgICAgICAgICAgIHZhciBtaXNzaW5ncyA9IExhenkoZXhwbG9kZWQpLmRpZmZlcmVuY2UoYmFkKS50b0FycmF5KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbWlzc2luZ3MgPSBleHBsb2RlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpbHRlciBwYXJ0aWFsc1xuICAgICAgICBpZiAobWlzc2luZ3MubGVuZ3RoKXtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUFza2VkW21vZGVsTmFtZV0ucHVzaC5hcHBseShjb21wb3NpdGVBc2tlZFttb2RlbE5hbWVdLG1pc3NpbmdzKTtcbiAgICAgICAgICAgIC8vIGFnZ3JlZ2F0ZSBtaXNzaW5nc1xuICAgICAgICAgICAgdmFyIG1pc3NpbmdzID0gTGF6eShmaWx0ZXIpLmtleXMoKS5tYXAoZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gTGF6eShtaXNzaW5ncykucGx1Y2soa2V5KS51bmlxdWUoKS50b0FycmF5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtrZXksIHJldC5sZW5ndGg/cmV0OmZpbHRlcltrZXldXTtcbiAgICAgICAgICAgIH0pLnRvT2JqZWN0KCk7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvdXQgOiAnICsgSlNPTi5zdHJpbmdpZnkobWlzc2luZ3MpKTtcbiAgICAgICAgICAgIC8vIGNsZWFuIGNvbmRpdGlvbmFsXG4gICAgICAgICAgICBjbGVhbkNvbXBvc2l0ZXMobW9kZWwsIG1pc3NpbmdzKTtcbiAgICAgICAgICAgIHJldHVybiBtaXNzaW5ncztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRJbmRleEZvciA9IGZ1bmN0aW9uKG1vZGVsTmFtZSwgZmllbGROYW1lKXtcbiAgICAgICAgdmFyIGluZGV4TmFtZSA9IG1vZGVsTmFtZSArICcuJyArIGZpZWxkTmFtZTtcbiAgICAgICAgaWYgKCEoaW5kZXhOYW1lIGluIGFza2VkKSl7XG4gICAgICAgICAgICBhc2tlZFtpbmRleE5hbWVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFza2VkW2luZGV4TmFtZV07XG4gICAgfVxufTsiLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIE1hbnlUb01hbnlSZWxhdGlvbihyZWxhdGlvbixtMm0pe1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuYWRkID0gaXRlbXMucHVzaC5iaW5kKGl0ZW1zKTtcbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICBjb25zb2xlLmxvZygnYWRkaW5nICcgKyBpdGVtKTtcbiAgICAgICAgaWYgKCEoTGF6eShpdGVtcykuZmluZChpdGVtKSkpe1xuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZ2V0MCA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgbTJtWzFdLmFzayhpZCk7XG4gICAgICAgIHJldHVybiBMYXp5KGl0ZW1zKS5maWx0ZXIoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICByZXR1cm4geFswXSA9PT0gaWQ7XG4gICAgICAgIH0pLnBsdWNrKFwiMVwiKS50b0FycmF5KCk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0MSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgbTJtWzBdLmFzayhpZCk7XG4gICAgICAgIHJldHVybiBMYXp5KGl0ZW1zKS5maWx0ZXIoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICByZXR1cm4geFsxXSA9PT0gaWQ7XG4gICAgICAgIH0pLnBsdWNrKFwiMFwiKS50b0FycmF5KCk7XG4gICAgfTtcbiAgICB0aGlzWydnZXQnICsgdXRpbHMuY2FwaXRhbGl6ZShyZWxhdGlvbi5pbmRleE5hbWUuc3BsaXQoJy8nKVsxXSldID0gdGhpcy5nZXQxO1xuICAgIHRoaXNbJ2dldCcgKyB1dGlscy5jYXBpdGFsaXplKHJlbGF0aW9uLmluZGV4TmFtZS5zcGxpdCgnLycpWzBdKV0gPSB0aGlzLmdldDA7XG5cbiAgICB0aGlzLmRlbCA9IGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICB2YXIgbCA9IGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgdmFyIGlkeCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbDsgYSsrKXsgXG4gICAgICAgICAgICBpZiAoKGl0ZW1zW2FdWzBdID09PSBpdGVtWzBdKSAmJiAoaXRlbXNbYV1bMV0gPT09IGl0ZW1bMV0pKXtcbiAgICAgICAgICAgICAgICBpZHggPSBhO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHgpe1xuICAgICAgICAgICAgaXRlbXMuc3BsaWNlKGEsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGluZyAnLCBpdGVtKTtcbiAgICB9O1xufSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gY2FjaGVkUHJvcGVydHlCeUV2ZW50cyhwcm90bywgcHJvcGVydHlOYW1lLGdldHRlciwgc2V0dGVyKXtcbiAgICB2YXIgZXZlbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDQpO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBcbiAgICBMYXp5KGV2ZW50cykuZWFjaChmdW5jdGlvbihldmVudCl7XG4gICAgICAgIHByb3RvLm9ybS5vbihldmVudCxmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmVzdWx0ID0ge307XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHZhciBwcm9wZXJ0eURlZiA9IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBjYWNoZWQoKXtcbiAgICAgICAgICAgIGlmICghKHRoaXMuaWQgaW4gcmVzdWx0KSl7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3RoaXMuaWRdID0gZ2V0dGVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0W3RoaXMuaWRdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoc2V0dGVyKXtcbiAgICAgICAgcHJvcGVydHlEZWZbJ3NldCddID0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSByZXN1bHRbdGhpcy5pZF0pe1xuICAgICAgICAgICAgICAgIHNldHRlci5jYWxsKHRoaXMsdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlkIGluIHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHRbdGhpcy5pZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgcHJvcGVydHlOYW1lLHByb3BlcnR5RGVmKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGRhdGEpe1xuICAgIHRoaXMucmVzb3VyY2UgPSBkYXRhLl9yZXNvdXJjZTtcbiAgICB0aGlzLmZvcm1JZHggPSBkYXRhLmZvcm1JZHg7XG4gICAgdGhpcy5maWVsZHMgPSBkYXRhLmVycm9ycztcbn1cbnZhciBiYXNlT1JNID0gZnVuY3Rpb24ob3B0aW9ucywgZXh0T1JNKXtcbiAgICBcbiAgICAvLyBjcmVhdGluZyByZXdoZWVsIGNvbm5lY3Rpb25cbiAgICBpZiAob3B0aW9ucy5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKXtcbiAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgcmVXaGVlbENvbm5lY3Rpb24ob3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmNvbnN0cnVjdG9yID09PSB1dGlscy5yZVdoZWVsQ29ubmVjdGlvbil7XG4gICAgICAgIHZhciBjb25uZWN0aW9uID0gb3B0aW9ucztcbiAgICB9XG4gICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICBjb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCBmdW5jdGlvbigpeyBcbiAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICAgIHZhciBldmVudHMgPSBjb25uZWN0aW9uLmV2ZW50cztcbiAgICB0aGlzLm9uID0gZXZlbnRzLm9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbWl0ID0gZXZlbnRzLmVtaXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVuYmluZCA9IGV2ZW50cy51bmJpbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLiRwb3N0ID0gY29ubmVjdGlvbi4kcG9zdC5iaW5kKGNvbm5lY3Rpb24pO1xuXG4gICAgLy8gaGFuZGxpbmcgd2Vic29ja2V0IGV2ZW50c1xuICAgIGV2ZW50cy5vbignd3MtY29ubmVjdGVkJyxmdW5jdGlvbih3cyl7XG4gICAgICAgIGNvbnNvbGUuaW5mbygnV2Vic29ja2V0IGNvbm5lY3RlZCcpO1xuICAgICAgICAvLyBhbGwganNvbiBkYXRhIGhhcyB0byBiZSBwYXJzZWQgYnkgZ290RGF0YVxuICAgICAgICB3cy5vbk1lc3NhZ2VKc29uKFcyUFJFU09VUkNFLmdvdERhdGEuYmluZChXMlBSRVNPVVJDRSkpO1xuICAgICAgICAvL1xuICAgICAgICB3cy5vbk1lc3NhZ2VUZXh0KGZ1bmN0aW9uKG1lc3NhZ2Upe1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdXUyBtZXNzYWdlIDogJyArIG1lc3NhZ2UpXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGV2ZW50cy5vbignd3MtZGlzY29ubmVjdGVkJywgZnVuY3Rpb24od3Mpe1xuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJzb2NrZXQgZGlzY29ubmVjdGVkJylcbiAgICB9KTtcbiAgICBldmVudHMub24oJ2Vycm9yLWpzb24tNDA0JyxmdW5jdGlvbihlcnJvcix1cmwsIHNlbnREYXRhLCB4aHIpeyBcbiAgICAgICAgY29uc29sZS5lcnJvcignSlNPTiBlcnJvciAnLCBKU09OLnN0cmluZ2lmeShlcnJvcikpO1xuICAgICAgICBkZWxldGUgd2FpdGluZ0Nvbm5lY3Rpb25zW3VybC5zcGxpdCgnLycpWzBdXTtcbiAgICB9KVxuXG4gICAgLy8gaW5pdGlhbGl6YXRpb25cbiAgICB2YXIgVzJQUkVTT1VSQ0UgPSB0aGlzO1xuICAgIHZhciBJREIgPSB7YXV0aF9ncm91cCA6IExhenkoe30pfTsgLy8gdGFibGVOYW1lIC0+IGRhdGEgYXMgQXJyYXlcbiAgICB2YXIgSURYID0ge307IC8vIHRhYmxlTmFtZSAtPiBMYXp5KGluZGV4QnkoJ2lkJykpIC0+IElEQltkYXRhXVxuICAgIHZhciBSRVZJRFggPSB7fTsgLy8gdGFibGVOYW1lIC0+IGZpZWxkTmFtZSAtPiBMYXp5Lmdyb3VwQnkoKSAtPiBJREJbREFUQV1cbiAgICB2YXIgYnVpbGRlckhhbmRsZXJzID0ge307XG4gICAgdmFyIGJ1aWxkZXJIYW5kbGVyVXNlZCA9IHt9O1xuICAgIHZhciBwZXJzaXN0ZW50QXR0cmlidXRlcyA9IHt9O1xuICAgIHZhciBldmVudEhhbmRsZXJzID0ge307XG4gICAgdmFyIHBlcm1pc3Npb25XYWl0aW5nID0ge307XG4gICAgdmFyIG1vZGVsQ2FjaGUgPSB7fTtcbiAgICB2YXIgZmFpbGVkTW9kZWxzID0ge307XG4gICAgdmFyIHdhaXRpbmdDb25uZWN0aW9ucyA9IHt9IC8vIGFjdHVhbCBjb25uZWN0aW9uIHdobyBpJ20gd2FpdGluZyBmb3JcbiAgICB2YXIgbGlzdENhY2hlID0gbmV3IExpc3RDYWNoZXIoTGF6eSk7XG4gICAgdmFyIGxpbmtlciA9IG5ldyBBdXRvTGlua2VyKGV2ZW50cyx3YWl0aW5nQ29ubmVjdGlvbnMsSURCLCB0aGlzLCBsaXN0Q2FjaGUpO1xuLyogICAgd2luZG93LmxsID0gbGlua2VyO1xuICAgIHdpbmRvdy5sYyA9IGxpc3RDYWNoZTtcbiovXG4gICAgdGhpcy52YWxpZGF0aW9uRXZlbnQgPSBldmVudHMub24oJ2Vycm9yLWpzb24tNTEzJywgZnVuY3Rpb24oZGF0YSwgdXJsLCBzZW50RGF0YSwgeGhyKXtcbiAgICAgICAgaWYgKGN1cnJlbnRDb250ZXh0LnNhdmluZ0Vycm9ySGFubGRlcil7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dC5zYXZpbmdFcnJvckhhbmxkZXIobmV3IFZhbGlkYXRpb25FcnJvcihkYXRhKSk7XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgdmFyIGdldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4TmFtZSkge1xuICAgICAgICBpZiAoaW5kZXhOYW1lIGluIElEQilcbiAgICAgICAgICAgIHJldHVybiBJREJbaW5kZXhOYW1lXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBJREJbaW5kZXhOYW1lXSA9IExhenkoe30pO1xuICAgICAgICAgICAgcmV0dXJuIElEQltpbmRleE5hbWVdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgZ2V0VW5saW5rZWQgPSBmdW5jdGlvbiAoaW5kZXhOYW1lKSB7XG4gICAgICAgIGlmIChpbmRleE5hbWUgaW4gVU5MSU5LRUQpXG4gICAgICAgICAgICByZXR1cm4gVU5MSU5LRURbaW5kZXhOYW1lXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBVTkxJTktFRFtpbmRleE5hbWVdID0ge307XG4gICAgICAgICAgICByZXR1cm4gVU5MSU5LRURbaW5kZXhOYW1lXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBQZXJtaXNzaW9uVGFibGUoaWQsIGtsYXNzLCBwZXJtaXNzaW9ucykge1xuICAgICAgICAvLyBjcmVhdGUgUGVybWlzc2lvblRhYmxlIGNsYXNzXG4gICAgICAgIHRoaXMua2xhc3MgPSBrbGFzcztcbiAgICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIGZvciAodmFyIGsgaW4gcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgIHRoaXMucHVzaC5hcHBseSh0aGlzLCBbaywgcGVybWlzc2lvbnNba11dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBQZXJtaXNzaW9uVGFibGUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgLy8gc2F2ZSBPYmplY3QgdG8gc2VydmVyXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgcGVybWlzc2lvbnM6IExhenkodGhpcy5wZXJtaXNzaW9ucykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt4WzBdLmlkLCB4WzFdXVxuICAgICAgICAgICAgfSkudG9PYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBkYXRhLmlkID0gdGhpcy5pZDtcbiAgICAgICAgdmFyIG1vZGVsTmFtZSA9IHRoaXMua2xhc3MubW9kZWxOYW1lO1xuICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdCh0aGlzLmtsYXNzLm1vZGVsTmFtZSArICcvc2V0X3Blcm1pc3Npb25zJywgZGF0YSwgZnVuY3Rpb24gKG15UGVybXMsIGEsIGIsIHJlcSkge1xuICAgICAgICAgICAgY2IobXlQZXJtcyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUGVybWlzc2lvblRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGdyb3VwX2lkLCBwZXJtaXNzaW9uTGlzdCkge1xuICAgICAgICB2YXIgcCA9IExhenkocGVybWlzc2lvbkxpc3QpO1xuICAgICAgICB2YXIgcGVybXMgPSBMYXp5KHRoaXMua2xhc3MuYWxsUGVybWlzc2lvbnMpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIFt4LCBwLmNvbnRhaW5zKHgpXVxuICAgICAgICB9KS50b09iamVjdCgpO1xuICAgICAgICB2YXIgbCA9IExhenkodGhpcy5wZXJtaXNzaW9ucykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4geFswXS5pZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGwuY29udGFpbnMoZ3JvdXBfaWQpKVxuICAgICAgICAgICAgdGhpcy5wZXJtaXNzaW9uc1tsLmluZGV4T2YoZ3JvdXBfaWQpXVsxXSA9IHBlcm1zO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25zLnB1c2goW0lEQi5hdXRoX2dyb3VwLmdldChncm91cF9pZCksIHBlcm1zXSk7XG4gICAgfTtcblxuICAgIC8vIGNyZWF0ZXMgZHluYW1pY2FsIG1vZGVsc1xuICAgIHZhciBtYWtlTW9kZWxDbGFzcyA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICB2YXIgX21vZGVsID0gbW9kZWw7XG4gICAgICAgIHZhciBmaWVsZHMgPSBMYXp5KG1vZGVsLmZpZWxkcyk7XG4gICAgICAgIGlmIChtb2RlbC5wcml2YXRlQXJncykge1xuICAgICAgICAgICAgZmllbGRzID0gZmllbGRzLm1lcmdlKG1vZGVsLnByaXZhdGVBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBXMlBSRVNPVVJDRS5lbWl0KCdtb2RlbC1kZWZpbml0aW9uJywgbW9kZWwpO1xuICAgICAgICAvLyBnZXR0aW5nIGZpZWxkcyBvZiB0eXBlIGRhdGUgYW5kIGRhdGV0aW1lXG4vKlxuICAgICAgICB2YXIgREFURUZJRUxEUyA9IGZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiAoeC50eXBlID09ICdkYXRlJykgfHwgKHgudHlwZSA9PSAnZGF0ZXRpbWUnKVxuICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHgsIHYpIHtcbiAgICAgICAgICAgIHJldHVybiBbdiwgdHJ1ZV1cbiAgICAgICAgfSkudG9PYmplY3QoKTtcblxuICAgICAgICAvLyBnZXR0aW5nIGJvb2xlYW4gZmllbGRzXG4gICAgICAgIHZhciBCT09MRklFTERTID0gZmllbGRzLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuICh4LnR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHgsIHYpIHtcbiAgICAgICAgICAgIHJldHVybiBbdiwgdHJ1ZV1cbiAgICAgICAgfSkudG9PYmplY3QoKTtcblxuICAgICAgICAvLyBib29sZWFucyBhbmQgZGF0ZXRpbWVzIHN0b3JhZ2UgZXh0ZXJuYWwgXG4gICAgICAgIE1PREVMX0RBVEVGSUVMRFNbbW9kZWwubmFtZV0gPSBEQVRFRklFTERTO1xuICAgICAgICBNT0RFTF9CT09MRklFTERTW21vZGVsLm5hbWVdID0gQk9PTEZJRUxEUztcbiovXG4gICAgICAgIC8vIGluaXRpYWxpemF0aW9uXG4gICAgICAgIHZhciBmdW5jU3RyaW5nID0gXCJpZiAoIXJvdykgeyByb3cgPSB7fX07XFxuXCI7XG4gICAgICAgIGZ1bmNTdHJpbmcgKz0gbW9kZWwucmVmZXJlbmNlcy5tYXAoZnVuY3Rpb24oZmllbGQpe1xuICAgICAgICAgICAgcmV0dXJuICd0aGlzLl8nICsgZmllbGQuaWQgKyAnID0gcm93LicgKyBmaWVsZC5pZCArICc7JztcbiAgICAgICAgfSkuam9pbignO1xcbicpO1xuICAgICAgICBcbiAgICAgICAgLy8gZGF0ZWZpZWxkIGNvbnZlcnNpb25cbiAgICAgICAgZnVuY1N0cmluZyArPSBmaWVsZHMubWFwKGZ1bmN0aW9uICh4LGspIHtcbiAgICAgICAgICAgIGlmICgoeC50eXBlID09ICdkYXRlJykgfHwgKHgudHlwZSA9PSAnZGF0ZXRpbWUnKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICd0aGlzLicgKyBrICsgJyA9IHJvdy4nICsgayArICc/bmV3IERhdGUocm93LicgKyBrICsgJyAqIDEwMDAgLSAnICsgdXRpbHMudHpPZmZzZXQgKyAnKTpudWxsO1xcbic7IFxuICAgICAgICAgICAgfSBlbHNlIGlmICh4LnR5cGUgPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICd0aGlzLicgKyBrICsgJyA9IChyb3cuJyArIGsgKyAnID09PSBcIlRcIikgfHwgKHJvdy4nICsgayArICcgPT09IHRydWUpO1xcbic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAndGhpcy4nICsgayArICcgPSByb3cuJyArIGsgKyAnO1xcbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnRvU3RyaW5nKCdcXG4nKTsgKyAnXFxuJztcblxuICAgICAgICBmdW5jU3RyaW5nICs9IFwiaWYgKHBlcm1pc3Npb25zKSB7dGhpcy5fcGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucyAmJiBMYXp5KHBlcm1pc3Npb25zKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFt4LCB0cnVlXSB9KS50b09iamVjdCgpO31cIlxuXG4gICAgICAgIFxuICAgICAgICAvLyBtYXN0ZXIgY2xhc3MgZnVuY3Rpb25cbiAgICAgICAgdmFyIEtsYXNzID0gbmV3IEZ1bmN0aW9uKCdyb3cnLCAncGVybWlzc2lvbnMnLGZ1bmNTdHJpbmcpXG5cbiAgICAgICAgS2xhc3MucHJvdG90eXBlLm9ybSA9IGV4dE9STTtcbiAgICAgICAgS2xhc3MucmVmX3RyYW5zbGF0aW9ucyA9IHt9O1xuICAgICAgICBLbGFzcy5tb2RlbE5hbWUgPSBtb2RlbC5uYW1lO1xuICAgICAgICBLbGFzcy5yZWZlcmVuY2VzID0gTGF6eShtb2RlbC5yZWZlcmVuY2VzKS5wbHVjaygnaWQnKS50b0FycmF5KCk7XG5cbiAgICAgICAgS2xhc3MuaW52ZXJzZV9yZWZlcmVuY2VzID0gbW9kZWwucmVmZXJlbmNlZEJ5Lm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgLy8gbWFuYWdpbmcgcmVmZXJlbmNlcyB3aGVyZSBcbiAgICAgICAgICAgIHJldHVybiB4LmJ5ICsgJ18nICsgeC5pZCArICdfc2V0J1xuICAgICAgICB9KTtcbiAgICAgICAgS2xhc3MucmVmZXJlbnRzID0gbW9kZWwucmVmZXJlbmNlZEJ5Lm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIFt4LmJ5LCB4LmlkXVxuICAgICAgICB9KTtcbiAgICAgICAgS2xhc3MuZmllbGRzT3JkZXIgPSBtb2RlbC5maWVsZE9yZGVyO1xuICAgICAgICBLbGFzcy5hbGxQZXJtaXNzaW9ucyA9IG1vZGVsLnBlcm1pc3Npb25zO1xuXG4gICAgICAgIC8vIHJlZGVmaW5pbmcgdG9TdHJpbmcgbWV0aG9kXG4gICAgICAgIGlmIChMYXp5KG1vZGVsLnJlcHJlc2VudGF0aW9uKS5zaXplKCkpe1xuICAgICAgICAgICAgS2xhc3MucHJvdG90eXBlLnRvU3RyaW5nID0gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcy4nICsgTGF6eShtb2RlbC5yZXByZXNlbnRhdGlvbikudG9TdHJpbmcoJyArIFwiIFwiICsgdGhpcy4nKSk7XG4gICAgICAgIH1cbiAgICAgICAgS2xhc3MucHJvdG90eXBlLnRvVXBwZXJDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gcmVkZWZpbmUgdG8gVXBwZXJDYXNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH07XG4gICAgICBcbiAgICAgICAgS2xhc3MucHJvdG90eXBlLnRvTG93ZXJDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgS2xhc3MucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBpbnN0YW5jZSBmcm9tIHNlcnZlclxuICAgICAgICAgICAgcmV0dXJuIGV4dE9STS5kZWxldGUodGhpcy5jb25zdHJ1Y3Rvci5tb2RlbE5hbWUsIFt0aGlzLmlkXSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gcGVybWlzc2lvbiBnZXR0ZXIgcHJvcGVydHlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtsYXNzLnByb3RvdHlwZSwgJ3Blcm1pc3Npb25zJywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3Blcm1pc3Npb25zKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVybWlzc2lvbnM7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtlci5wZXJtaXNzaW9uc1t0aGlzLmNvbnN0cnVjdG9yLm1vZGVsTmFtZV0uYXNrKHRoaXMuaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGdldHRpbmcgZnVsbCBwZXJtaXNzaW9uIHRhYmxlIGZvciBhbiBvYmplY3RcbiAgICAgICAgS2xhc3MucHJvdG90eXBlLmFsbF9wZXJtcyA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgdmFyIG9iamVjdF9pZCA9IHRoaXMuaWQ7XG4gICAgICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdCh0aGlzLmNvbnN0cnVjdG9yLm1vZGVsTmFtZSArICcvYWxsX3Blcm1zJywge2lkOiB0aGlzLmlkfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVybWlzc2lvbnMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHZhciBncm91cGVkID0ge307XG4gICAgICAgICAgICAgICAgdmFyIHVua25vd25fZ3JvdXBzID0gTGF6eShwZXJtaXNzaW9ucykucGx1Y2soJ2dyb3VwX2lkJykudW5pcXVlKCkubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJyArIHhcbiAgICAgICAgICAgICAgICB9KS5kaWZmZXJlbmNlKElEQi5hdXRoX2dyb3VwLmtleXMoKSkudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgIExhenkocGVybWlzc2lvbnMpLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguZ3JvdXBfaWRcbiAgICAgICAgICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uICh2LCBrKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwZWRba10gPSBMYXp5KHYpLnBsdWNrKCduYW1lJykudG9BcnJheSgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNhbGwgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBjYihuZXcgUGVybWlzc2lvblRhYmxlKG9iamVjdF9pZCwgS2xhc3MsIGdyb3VwZWQpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh1bmtub3duX2dyb3Vwcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmdldCgnYXV0aF9ncm91cCcsdW5rbm93bl9ncm91cHMsY2FsbCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjYWxsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBLbGFzcy5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuYXNSYXcoKTtcbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSBLbGFzcy5maWVsZHM7XG4gICAgICAgICAgICB2YXIgSUQgPSB0aGlzLmlkO1xuICAgICAgICAgICAgdmFyIG1vZGVsTmFtZSA9IHRoaXMuY29uc3RydWN0b3IubW9kZWxOYW1lO1xuICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhcmcgaW4gYXJncykge1xuICAgICAgICAgICAgICAgICAgICBvW2FyZ10gPSBhcmdzW2FyZ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZWxpbWluYXRlIHVud3JpdGFibGVzXG4gICAgICAgICAgICBMYXp5KEtsYXNzLmZpZWxkc09yZGVyKS5maWx0ZXIoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFmaWVsZHNbeF0ud3JpdGFibGU7XG4gICAgICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uKGZpZWxkTmFtZSl7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IFcyUFJFU09VUkNFLiRwb3N0KG1vZGVsTmFtZSArIChJRCA/ICcvcG9zdCcgOiAnL3B1dCcpLCBvKTtcbiAgICAgICAgICAgIGlmIChhcmdzICYmIChhcmdzLmNvbnN0cnVjdG9yID09PSBGdW5jdGlvbikpe1xuICAgICAgICAgICAgICAgIC8vIHBsYWNpbmcgY2FsbGJhY2sgaW4gYSBjb21tb24gcGxhY2VcbiAgICAgICAgICAgICAgICBwcm9taXNlLmNvbnRleHQuc2F2aW5nRXJyb3JIYW5sZGVyID0gYXJncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIH07XG4gICAgICAgIEtsYXNzLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXNSYXcoKSk7XG4gICAgICAgICAgICBvYmouX3Blcm1pc3Npb25zID0gdGhpcy5fcGVybWlzc2lvbnM7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGJ1aWxkaW5nIHNlcmlhbGl6YXRpb24gZnVuY3Rpb25cbiAgICAgICAgdmFyIGFzciA9ICdyZXR1cm4ge1xcbicgKyBMYXp5KG1vZGVsLnJlZmVyZW5jZXMpLm1hcChmdW5jdGlvbihmaWVsZCl7XG4gICAgICAgICAgICByZXR1cm4gZmllbGQuaWQgKyAnIDogdGhpcy5fJyArIGZpZWxkLmlkO1xuICAgICAgICB9KS5jb25jYXQoZmllbGRzLm1hcChmdW5jdGlvbiAoeCxrKSB7XG4gICAgICAgICAgICBpZiAoKHgudHlwZSA9PSAnZGF0ZScpIHx8ICh4LnR5cGUgPT0gJ2RhdGV0aW1lJykpe1xuICAgICAgICAgICAgICAgIHJldHVybiBrICsgJyA6ICh0aGlzLicgKyBrICsgJz8oTWF0aC5yb3VuZCh0aGlzLicgKyBrICsgJy5nZXRUaW1lKCkgLSB0aGlzLicgKyBrICsgJy5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApIC8gMTAwMCk6bnVsbCknOyBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeC50eXBlID09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBrICsgJyA6IHRoaXMuJyArIGsgKyAnP1wiVFwiOlwiRlwiJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGsgKyAnIDogdGhpcy4nICsgaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLnRvU3RyaW5nKCcsXFxuJykgKyAnfTsnO1xuICAgICAgICBLbGFzcy5wcm90b3R5cGUuYXNSYXcgPSBuZXcgRnVuY3Rpb24oYXNyKTtcblxuICAgICAgICBLbGFzcy5zYXZlTXVsdGkgPSBmdW5jdGlvbiAob2JqZWN0cywgY2IsIHNjb3BlKSB7XG4gICAgICAgICAgICB2YXIgcmF3ID0gW107XG4gICAgICAgICAgICB2YXIgZGVsZXRhYmxlID0gTGF6eShLbGFzcy5maWVsZHMpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXgud3JpdGFibGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5wbHVjaygnaWQnKVxuICAgICAgICAgICAgICAgIC50b0FycmF5KCk7XG4gICAgICAgICAgICBMYXp5KG9iamVjdHMpXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5hc1JhdygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBMYXp5KGRlbGV0YWJsZSkuZWFjaChmdW5jdGlvbiAoeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHhbeV07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByYXcucHVzaCh4KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFcyUFJFU09VUkNFLiRwb3N0KEtsYXNzLm1vZGVsTmFtZSwgJ3B1dCcsIHttdWx0aXBsZTogcmF3LCBmb3JtSWR4IDogVzJQUkVTT1VSQ0UuZm9ybUlkeCsrfSwgZnVuY3Rpb24gKGVsZW1zKSB7XG4gICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuZ290RGF0YShlbGVtcyk7XG4gICAgICAgICAgICAgICAgdmFyIHRhYiA9IElEQltLbGFzcy5tb2RlbE5hbWVdO1xuICAgICAgICAgICAgICAgIHZhciBvYmpzID0gTGF6eShlbGVtc1tLbGFzcy5tb2RlbE5hbWVdLnJlc3VsdHMpLnBsdWNrKCdpZCcpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFiLmdldCh4KVxuICAgICAgICAgICAgICAgIH0pLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2Iob2Jqcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgc2NvcGUpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoJ2V4dHJhX3ZlcmJzJyBpbiBtb2RlbClcbiAgICAgICAgICAgIExhenkobW9kZWwuZXh0cmFfdmVyYnMpLmVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZnVuY05hbWUgPSB4WzBdO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0geFsxXTtcbiAgICAgICAgICAgICAgICB2YXIgZGRhdGEgPSAnZGF0YSA9IHtpZCA6IHRoaXMuaWQnO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZGRhdGEgKz0gJywgJyArIExhenkoYXJncykubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHggKyAnIDogJyArIHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcsJyk7XG4gICAgICAgICAgICAgICAgZGRhdGEgKz0gJ307JztcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goJ2NiJyk7XG4gICAgICAgICAgICAgICAgS2xhc3MucHJvdG90eXBlW2Z1bmNOYW1lXSA9IG5ldyBGdW5jdGlvbihhcmdzLCBkZGF0YSArICdXMlMuVzJQX1BPU1QodGhpcy5jb25zdHJ1Y3Rvci5tb2RlbE5hbWUsXCInICsgZnVuY05hbWUgKyAnXCIsIGRhdGEsZnVuY3Rpb24oZGF0YSxzdGF0dXMsaGVhZGVycyx4KXsnICtcbiAgICAgICAgICAgICAgICAgICAgJ3RyeXtcXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgIGlmICghaGVhZGVycyhcIm5vbW9kZWxcIikpIHt3aW5kb3cuVzJTLmdvdERhdGEoZGF0YSxjYik7fVxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgZWxzZSB7aWYgKGNiKSB7Y2IoZGF0YSl9fVxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnfSBjYXRjaChlKXtcXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJ2lmIChjYikge2NiKGRhdGEpO31cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJ31cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJ30pO1xcbidcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGlmICgncHJpdmF0ZUFyZ3MnIGluIG1vZGVsKSB7XG4gICAgICAgICAgICBLbGFzcy5wcml2YXRlQXJncyA9IExhenkobW9kZWwucHJpdmF0ZUFyZ3MpLmtleXMoKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW3gsIHRydWVdO1xuICAgICAgICAgICAgfSkudG9PYmplY3QoKTtcbiAgICAgICAgICAgIEtsYXNzLnByb3RvdHlwZS5zYXZlUEEgPSBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgIHZhciBUID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgb28gPSB7aWQ6IHRoaXMuaWR9O1xuICAgICAgICAgICAgICAgIHZhciBQQSA9IHRoaXMuY29uc3RydWN0b3IucHJpdmF0ZUFyZ3M7XG4gICAgICAgICAgICAgICAgdmFyIEZzID0gdGhpcy5jb25zdHJ1Y3Rvci5maWVsZHM7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihvKS5hc1JhdygpO1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZElkeCA9IExhenkoUEEpLmtleXMoKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt4LCBGc1t4XV1cbiAgICAgICAgICAgICAgICB9KS50b09iamVjdCgpO1xuICAgICAgICAgICAgICAgIExhenkobykuZWFjaChmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGsgaW4gUEEpICYmIGZpZWxkSWR4W2tdLndyaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvb1trXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdCh0aGlzLmNvbnN0cnVjdG9yLm1vZGVsTmFtZSArICcvc2F2ZVBBJywgb28sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgTGF6eShvbykuZWFjaChmdW5jdGlvbiAodiwgaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgVFtrXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGVsQ2FjaGVbS2xhc3MubW9kZWxOYW1lXSA9IEtsYXNzO1xuICAgICAgICAvLyBhZGRpbmcgaWQgdG8gZmllbGRzXG4gICAgICAgIGZvciAodmFyIGYgaW4gbW9kZWwuZmllbGRzKSB7XG4gICAgICAgICAgICBtb2RlbC5maWVsZHNbZl0uaWQgPSBmO1xuICAgICAgICB9XG4gICAgICAgIEtsYXNzLmZpZWxkcyA9IExhenkobW9kZWwuZmllbGRzKS5jb25jYXQoTGF6eShtb2RlbC5wcml2YXRlQXJncykpLmNvbmNhdChMYXp5KG1vZGVsLnJlZmVyZW5jZXMpLnRhcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgeC50eXBlID0geC50eXBlIHx8ICdyZWZlcmVuY2UnXG4gICAgICAgIH0pKS5pbmRleEJ5KCdpZCcpLnRvT2JqZWN0KCk7XG4gICAgICAgIC8vIGJ1aWxkaW5nIHJlZmVyZW5jZXMgdG8gKG1hbnkgdG8gb25lKSBmaWVsZHNcbiAgICAgICAgTGF6eShtb2RlbC5yZWZlcmVuY2VzKS5lYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgIHZhciBleHRfcmVmID0gcmVmLnRvO1xuICAgICAgICAgICAgdmFyIGxvY2FsX3JlZiA9ICdfJyArIHJlZi5pZDtcbiAgICAgICAgICAgIGNhY2hlZFByb3BlcnR5QnlFdmVudHMoS2xhc3MucHJvdG90eXBlLCByZWYuaWQsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghKGV4dF9yZWYgaW4gSURCKSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS5kZXNjcmliZShleHRfcmVmLGZ1bmN0aW9uKHgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua2VyLm1haW5JbmRleFtleHRfcmVmXS5hc2sodGhzW2xvY2FsX3JlZl0sdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGV4dF9yZWYgaW4gSURCKSAmJiB0aGlzW2xvY2FsX3JlZl0gJiYgSURCW2V4dF9yZWZdLmdldCh0aGlzW2xvY2FsX3JlZl0pO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIChleHRfcmVmIGluIGxpbmtlci5tYWluSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFza2luZyB0byBsaW5rZXJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmtlci5tYWluSW5kZXhbZXh0X3JlZl0uYXNrKHRoaXNbbG9jYWxfcmVmXSx0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IubW9kZWxOYW1lICE9IGV4dF9yZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBjYW4gYXNzaWduIG9ubHkgJyArIGV4dF9yZWYgKyAnIHRvICcgKyByZWYuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXNbbG9jYWxfcmVmXSA9IHZhbHVlLmlkO1xuICAgICAgICAgICAgfSwgJ25ldy0nICsgZXh0X3JlZiwgJ2RlbGV0ZWQtJyArIGV4dF9yZWYsJ3VwZGF0ZWQtJyArIGV4dF9yZWYsICduZXctbW9kZWwtJyArIGV4dF9yZWYpO1xuXG5cbiAgICAgICAgICAgIEtsYXNzLnByb3RvdHlwZVsnZ2V0JyArIHV0aWxzLmNhcGl0YWxpemUocmVmLmlkKV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dE9STS5nZXQoZXh0X3JlZix0aGlzW2xvY2FsX3JlZl0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9idWlsZGluZyByZWZlcmVuY2VzIHRvIChvbmUgdG8gbWFueSkgZmllbGRzXG4gICAgICAgIExhenkobW9kZWwucmVmZXJlbmNlZEJ5KS5lYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgIHZhciBpbmRleE5hbWUgPSByZWYuYnkgKyAnLicgKyByZWYuaWQ7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lID0gcmVmLmJ5ICsgJ18nICsgdXRpbHMucGx1cmFsaXplKHJlZi5pZCk7XG4gICAgICAgICAgICB2YXIgcmV2SW5kZXggPSByZWYuYnk7XG4gICAgICAgICAgICBpZiAoS2xhc3MucHJvdG90eXBlLmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKCdUcnllZCB0byByZWRlZmluZSBwcm9wZXJ0eSAnICsgcHJvcGVydHlOYW1lICsgJ3MnICsgJyBmb3IgJyArIEtsYXNzLm1vZGVsTmFtZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhY2hlZFByb3BlcnR5QnlFdmVudHMoS2xhc3MucHJvdG90eXBlLCBwcm9wZXJ0eU5hbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IChyZXZJbmRleCBpbiBJREIpID8gUkVWSURYW2luZGV4TmFtZV0uZ2V0KHRoaXMuaWQgKyAnJyk6bnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbGlua2VyLmZvcmVpZ25LZXlzW2luZGV4TmFtZV0uYXNrKHRoaXMuaWQsdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgfSwgbnVsbCwgJ25ldy0nICsgcmV2SW5kZXgsICd1cGRhdGVkLScgKyByZXZJbmRleCwgJ2RlbGV0ZWQtJyArIHJldkluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEtsYXNzLnByb3RvdHlwZVsnZ2V0JyArIHV0aWxzLmNhcGl0YWxpemUodXRpbHMucGx1cmFsaXplKHJlZi5ieSkpXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IHt9O1xuICAgICAgICAgICAgICAgIG9wdHNbcmVmLmlkXSA9IFt0aGlzLmlkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0T1JNLnF1ZXJ5KHJlZi5ieSxvcHRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vYnVpbGRpbmcgcmVmZXJlbmNlIHRvIChtYW55IHRvIG1hbnkpIGZpZWxkc1xuICAgICAgICBpZiAobW9kZWwubWFueVRvTWFueSkge1xuICAgICAgICAgICAgTGF6eShtb2RlbC5tYW55VG9NYW55KS5lYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gcmVmLmluZGV4TmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSByZWYuZmlyc3Q/IDAgOiAxO1xuICAgICAgICAgICAgICAgIHZhciBvbW9kZWxOYW1lID0gcmVmLm1vZGVsO1xuLy8gICAgICAgICAgICAgICAgdmFyIG9tb2RlbCA9IGdldEluZGV4KG9tb2RlbE5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBnZXR0ZXIgPSBsaW5rZXIubTJtSW5kZXhbaW5kZXhOYW1lXVsnZ2V0JyArICgxIC0gZmlyc3QpXTtcblxuICAgICAgICAgICAgICAgIGNhY2hlZFByb3BlcnR5QnlFdmVudHMoS2xhc3MucHJvdG90eXBlLCByZWYubW9kZWwgKyAncycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aHMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkcyA9IGdldHRlcih0aHMuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9XMlBSRVNPVVJDRS5mZXRjaChvbW9kZWxOYW1lLCB7aWQgOiBpZHN9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgPSBnZXRJbmRleChvbW9kZWxOYW1lKS5nZXQuYmluZChJREJbb21vZGVsTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRzICYmIGdldClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBMYXp5KGlkcykubWFwKGdldCkuZmlsdGVyKHV0aWxzLmJvb2wpLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIG51bGwsICdyZWNlaXZlZC1tMm0tJyArIGluZGV4TmFtZSwgJ3JlY2VpdmVkLScgKyBvbW9kZWxOYW1lKTtcblxuICAgICAgICAgICAgICAgIEtsYXNzLnByb3RvdHlwZVsnZ2V0JyArIHV0aWxzLmNhcGl0YWxpemUodXRpbHMucGx1cmFsaXplKG9tb2RlbE5hbWUpKV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3Qpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rZXIuZ2V0TTJNKGluZGV4TmFtZSwgW3Rocy5pZF0sIGZpcnN0LGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRzID0gZ2V0dGVyKHRocy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmZldGNoKG9tb2RlbE5hbWUsIHtpZCA6IGlkc30sbnVsbCxmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZXQgPSBJREJbb21vZGVsTmFtZV0uZ2V0LmJpbmQoSURCW29tb2RlbE5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQoTGF6eShpZHMpLm1hcChnZXQpLmZpbHRlcih1dGlscy5ib29sKS50b0FycmF5KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAgICAgS2xhc3MuZmllbGRzW3V0aWxzLmNhcGl0YWxpemUob21vZGVsTmFtZSldID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogdXRpbHMuY2FwaXRhbGl6ZShvbW9kZWxOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdXRpbHMuY2FwaXRhbGl6ZShvbW9kZWxOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHJlYWRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnTTJNJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yczogW11cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgS2xhc3MucHJvdG90eXBlLnVubGlua1JlZmVyZW5jZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBJRCA9IHRoaXMuaWQ7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5jb25zdHJ1Y3Rvci5uYW1lID09ICdBcnJheScpIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXMgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvbW9kZWwgPSBpbnN0YW5jZS5jb25zdHJ1Y3Rvci5tb2RlbE5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gTGF6eShpbnN0YW5jZXMpLnBsdWNrKCdpZCcpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtJRCwgeF1cbiAgICAgICAgICAgICAgICAgICAgfSkudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gW1tJRCwgaW5zdGFuY2UuaWRdXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuJHBvc3QoS2xhc3MubW9kZWxOYW1lICsgJy8nICsgb21vZGVsICsgJ3MvZGVsZXRlJywge2NvbGxlY3Rpb246IGNvbGxlY3Rpb259KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEtsYXNzLnByb3RvdHlwZS5saW5rUmVmZXJlbmNlID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG11bHRpcGxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIElEID0gdGhpcy5pZDtcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmNvbnN0cnVjdG9yLm5hbWUgPT0gJ0FycmF5Jykge1xuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcyA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG9tb2RlbCA9IGluc3RhbmNlLmNvbnN0cnVjdG9yLm1vZGVsTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gS2xhc3MubW9kZWxOYW1lICsgJy8nICsgb21vZGVsO1xuICAgICAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVmcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhOYW1lIGluIElOREVYX00yTSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcyA9IExhenkoaW5zdGFuY2VzKS5wbHVjaygnaWQnKS5kaWZmZXJlbmNlKExhenkoSU5ERVhfTTJNW2luZGV4TmFtZV1bMF0uZ2V0KHRoaXMuaWQpKSkudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TmFtZSA9IG9tb2RlbCArICcvJyArIEtsYXNzLm1vZGVsTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4TmFtZSBpbiBJTkRFWF9NMk0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnMgPSBMYXp5KGluc3RhbmNlcykucGx1Y2soJ2lkJykuZGlmZmVyZW5jZShMYXp5KElOREVYX00yTVtpbmRleE5hbWVdWzBdLmdldCh0aGlzLmlkKSkpLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVmcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gTGF6eShyZWZzKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW0lELCB4XVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgVzJQX1BPU1QoS2xhc3MubW9kZWxOYW1lLCBvbW9kZWwgKyAncy9wdXQnLCB7Y29sbGVjdGlvbjogY29sbGVjdGlvbn0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaW5kZXhOYW1lIGluIGxpbmtlci5tMm1JbmRleCkgJiYgTGF6eShsaW5rZXIubTJtSW5kZXhbaW5kZXhOYW1lXVsnZ2V0JyArIHV0aWxzLmNhcGl0YWxpemUob21vZGVsKV0oaW5zdGFuY2UuaWQpKS5maW5kKHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuJHBvc3QoS2xhc3MubW9kZWxOYW1lICsgJy8nICsgb21vZGVsICsgJ3MvcHV0Jywge2NvbGxlY3Rpb246IFtbdGhpcy5pZCwgaW5zdGFuY2UuaWRdXX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRzLmVtaXQoJ25ldy1tb2RlbCcsIEtsYXNzKTtcbiAgICAgICAgZXZlbnRzLmVtaXQoJ25ldy1tb2RlbC0nICsgS2xhc3MubW9kZWxOYW1lKTtcbiAgICAgICAgcmV0dXJuIEtsYXNzO1xuICAgIH07XG5cbiAgICB0aGlzLmdvdERhdGEgPSBmdW5jdGlvbiAoZGF0YSwgY2FsbEJhY2spIHtcbiAgICAgICAgLy8gcmVjZWl2ZSBhbGwgZGF0YSBmcm9tIGV2ZXJ5IGVuZCBwb2ludFxuICAgICAgICBjb25zb2xlLmluZm8oJ2dvdERhdGEnKTtcbiAgICAgICAgaWYgKHR5cGVvZihkYXRhKSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEgJyArIGRhdGEgKyAnIHJlZnVzZWQgZnJvbSBnb3REYXRhKCknKTtcbiAgICAgICAgICAgIGlmIChjYWxsQmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsQmFjayhkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhbiBkYXRhIGZyb20gcmVsYXRpb25zIGFuZCBwZXJtaXNzaW9ucyBmb3IgdXNpbmcgaXQgYWZ0ZXIgbW9kZWwgcGFyc2luZ1xuICAgICAgICBpZiAoJ19leHRyYScgaW4gZGF0YSl7IGRlbGV0ZSBkYXRhLl9leHRyYSB9XG4gICAgICAgIHZhciBUT09ORSA9IGRhdGEuVE9PTkU7XG4gICAgICAgIHZhciBUT01BTlkgPSBkYXRhLlRPTUFOWTtcbiAgICAgICAgdmFyIE1BTllUT01BTlkgPSBkYXRhLk1BTllUT01BTlk7XG4gICAgICAgIHZhciBQRVJNSVNTSU9OUyA9IGRhdGEuUEVSTUlTU0lPTlM7XG4gICAgICAgIHZhciBQQSA9IGRhdGEuUEE7XG4gICAgICAgIGRlbGV0ZSBkYXRhLlRPT05FO1xuICAgICAgICBkZWxldGUgZGF0YS5UT01BTlk7XG4gICAgICAgIGRlbGV0ZSBkYXRhLk1BTllUT01BTlk7XG4gICAgICAgIGRlbGV0ZSBkYXRhLlBFUk1JU1NJT05TO1xuICAgICAgICBkZWxldGUgZGF0YS5QQTtcbiAgICAgICAgaWYgKCFQQSkgeyBQQSA9IHt9OyB9XG5cbiAgICAgICAgLy8gY2xlYW5pbmcgZnJvbSB1c2VsZXNzIGRlbGV0ZWQgZGF0YVxuICAgICAgICBkYXRhID0gTGF6eShkYXRhKS5maWx0ZXIoZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgIHJldHVybiAoISgnZGVsZXRlZCcgaW4gdikgfHwgKChrIGluIG1vZGVsQ2FjaGUpKSk7XG4gICAgICAgIH0pLnRvT2JqZWN0KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoJ20ybScgaW4gZGF0YSkge1xuICAgICAgICAgICAgdmFyIG0ybSA9IGRhdGEubTJtO1xuICAgICAgICAgICAgZGVsZXRlIGRhdGFbJ20ybSddO1xuICAgICAgICB9XG4gICAgICAgIExhenkoZGF0YSkuZWFjaChmdW5jdGlvbiAoZGF0YSwgbW9kZWxOYW1lKSB7XG4gICAgICAgICAgICBXMlBSRVNPVVJDRS5kZXNjcmliZShtb2RlbE5hbWUsIGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbENsYXNzID0gbW9kZWw7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0cyAmJiAoZGF0YS5yZXN1bHRzLmxlbmd0aCA+IDApICYmIChkYXRhLnJlc3VsdHNbMF0uY29uc3RydWN0b3IgPT0gQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucmVzdWx0cyA9IExhenkoZGF0YS5yZXN1bHRzKS5tYXAoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTGF6eShtb2RlbENsYXNzLmZpZWxkc09yZGVyKS56aXAoeCkudG9PYmplY3QoKVxuICAgICAgICAgICAgICAgICAgICB9KS50b0FycmF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gTGF6eShkYXRhLnJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIHZhciBkZWxldGVkID0gZGF0YS5kZWxldGVkO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbE5hbWUgaW4gUEEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIE1QQSA9IFBBW21vZGVsTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIExhenkocmVzdWx0cykuZWFjaChmdW5jdGlvbiAocmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjb3JkLmlkIGluIE1QQSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExhenkoTVBBW3JlY29yZC5pZF0pLmVhY2goZnVuY3Rpb24gKHYsIGspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkW2tdID0gdjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGluZyByZWZlcmVuY2VzIGJ5IGl0cyBJRFxuICAgICAgICAgICAgICAgIHZhciBpdGFiID0gZ2V0SW5kZXgobW9kZWxOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBpdGFiLnNvdXJjZTtcblxuICAgICAgICAgICAgICAgIC8vIG9iamVjdCBkZWxldGlvblxuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkKXtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZC5mb3JFYWNoKGZ1bmN0aW9uKHgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhYmxlW3hdO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbi8qXG4gICAgICAgICAgICAgICAgTGF6eShkZWxldGVkKS5lYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YWJsZVt4XTtcbiAgICAgICAgICAgICAgICB9KTtcbiovXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IHJlc3VsdHMuaW5kZXhCeSgnaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgaWsgPSBpZHgua2V5cygpO1xuICAgICAgICAgICAgICAgIHZhciBubmV3ID0gaWsuZGlmZmVyZW5jZShpdGFiLmtleXMoKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHgpXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkID0gaWsuZGlmZmVyZW5jZShubmV3KTtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmluZyBvbGQgaWRlbnRpY2FsIHZhbHVlc1xuICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSB1cGRhdGVkLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXV0aWxzLnNhbWVBcyhpZHguZ2V0KHgpLCBpdGFiLmdldCh4KS5hc1JhdygpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBjbGFzc2lmeSByZWNvcmRzXG4gICAgICAgICAgICAgICAgdmFyIHBlcm1zID0gZGF0YS5wZXJtaXNzaW9ucyA/IExhenkoZGF0YS5wZXJtaXNzaW9ucykgOiBMYXp5KHt9KTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3T2JqZWN0cyA9IG5uZXcubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbW9kZWxDbGFzcyhpZHguZ2V0KHgpLCBwZXJtcy5nZXQoeCkpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLy8vIGNsYXNzaWZ5aW5nIHVwZGF0ZWRcbiAgICAgICAgICAgICAgICAvL3ZhciB1cGRhdGVkT2JqZWN0cyA9IHVwZGF0ZWQubWFwKGZ1bmN0aW9uKHgpe3JldHVybiBuZXcgbW9kZWxDbGFzcyhpZHguZ2V0KHgpLHBlcm1zLmdldCh4KSl9KTtcbiAgICAgICAgICAgICAgICAvL3ZhciB1byA9IHVwZGF0ZWRPYmplY3RzLnRvQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZWRPYmplY3RzID0gTGF6eSh1bykubWFwKGZ1bmN0aW9uKHgpe3JldHVybiBbeCx0YWJsZVt4LmlkXV19KS50b0FycmF5KCk7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRpbmcgc2luZ2xlIG9iamVjdHNcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZCA9IFtdO1xuLy8gICAgICAgICAgICAgICAgdmFyIERBVEVGSUVMRFMgPSBNT0RFTF9EQVRFRklFTERTW21vZGVsTmFtZV07XG4vLyAgICAgICAgICAgICAgICB2YXIgQk9PTEZJRUxEUyA9IE1PREVMX0JPT0xGSUVMRFNbbW9kZWxOYW1lXTtcbiAgICAgICAgICAgICAgICB1cGRhdGVkLmVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEl0ZW0gPSBpdGFiLmdldCh4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZENvcHkgPSBvbGRJdGVtLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBuZXcgbW9kZWxDbGFzcyhpZHguZ2V0KHgpKTtcbiAgICAgICAgICAgICAgICAgICAgTGF6eShtb2RlbC5maWVsZHMpLmtleXMoKS5lYWNoKGZ1bmN0aW9uKGspe1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSXRlbVtrXSA9IG5ld0l0ZW1ba107XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkLnB1c2goW29sZEl0ZW0sIG9sZENvcHldKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vLy8gc2VuZGluZyBzaWduYWwgZm9yIHVwZGF0ZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cy5lbWl0KCd1cGRhdGVkLScgKyBtb2RlbE5hbWUsIGNoYW5nZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyoqKioqKioqIFVwZGF0ZSB1bml2ZXJzZSAqKioqKioqKlxuICAgICAgICAgICAgICAgIHZhciBubyA9IG5ld09iamVjdHMudG9BcnJheSgpO1xuICAgICAgICAgICAgICAgIExhenkobm8pLmVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFibGVbeC5pZF0gPSB4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gcmVidWxkaW5nIHJldmVyc2UgaW5kZXhlc1xuICAgICAgICAgICAgICAgIExhenkobW9kZWxDYWNoZVttb2RlbE5hbWVdLnJlZmVyZW5jZXMpLmVhY2goZnVuY3Rpb24gKHJlZikge1xuICAgICAgICAgICAgICAgICAgICBSRVZJRFhbbW9kZWxOYW1lICsgJy4nICsgcmVmXSA9IElEQlttb2RlbE5hbWVdLmdyb3VwQnkoJ18nICsgcmVmKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZW5kaW5nIGV2ZW50cyBmb3IgbmV3IHZhbHVlc1xuICAgICAgICAgICAgICAgIGlmIChuby5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cy5lbWl0KCduZXctJyArIG1vZGVsTmFtZSwgTGF6eShubyksIGRhdGEudG90YWxSZXN1bHRzKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudHMuZW1pdCgnZGVsZXRlZC0nICsgbW9kZWxOYW1lLCBkZWxldGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gc2VuZGluZyBldmVudHMgZm9yIGRhdGEgYXJyaXZlZFxuICAgICAgICAgICAgICAgIGV2ZW50cy5lbWl0KCdyZWNlaXZlZC0nICsgbW9kZWxOYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKFRPT05FKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUT09ORScpO1xuICAgICAgICAgICAgTGF6eShUT09ORSkuZWFjaChmdW5jdGlvbiAodmFscywgbW9kZWxOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobW9kZWxOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgdWR4ID0gZ2V0VW5saW5rZWQobW9kZWxOYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChUT01BTlkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RPTUFOWScpO1xuICAgICAgICAgICAgTGF6eShUT01BTlkpLmVhY2goZnVuY3Rpb24gKHZhbHMsIGluZGV4TmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghKGluZGV4TmFtZSBpbiBBU0tFRF9VTkxJTktFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgQVNLRURfVU5MSU5LRURbaW5kZXhOYW1lXSA9IExhenkoW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBMYXp5KHZhbHMpLmVhY2goZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIEFTS0VEX1VOTElOS0VEW2luZGV4TmFtZV0uc291cmNlLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1BTllUT01BTlkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01BTllUT01BTlknKTtcbiAgICAgICAgICAgIExhenkoTUFOWVRPTUFOWSkuZWFjaChmdW5jdGlvbiAodmFscywgaW5kZXhOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gcGFyc2VJbnQoaW5kZXhOYW1lLnNwbGl0KCd8JylbMV0pO1xuICAgICAgICAgICAgICAgIGluZGV4TmFtZSA9IGluZGV4TmFtZS5zcGxpdCgnfCcpWzBdO1xuICAgICAgICAgICAgICAgIGlmICghKGluZGV4TmFtZSBpbiBBU0tFRF9NMk0pKSB7XG4gICAgICAgICAgICAgICAgICAgIEFTS0VEX00yTVtpbmRleE5hbWVdID0gW3t9LCB7fV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBNSURYID0gQVNLRURfTTJNW2luZGV4TmFtZV1bZmlyc3RdO1xuICAgICAgICAgICAgICAgIExhenkodmFscykuZWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICBNSURYW3ggKyAnJ10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBNSURYW3hdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtMm0pIHtcbiAgICAgICAgICAgIFcyUFJFU09VUkNFLmdvdE0yTShtMm0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQRVJNSVNTSU9OUykge1xuICAgICAgICAgICAgVzJQUkVTT1VSQ0UuZ290UGVybWlzc2lvbnMoUEVSTUlTU0lPTlMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhbGxCYWNrKSB7XG4gICAgICAgICAgICBjYWxsQmFjayhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBldmVudHMuZW1pdCgnZ290LWRhdGEnKTtcbiAgICB9O1xuICAgIHRoaXMuZ290UGVybWlzc2lvbnMgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBMYXp5KGRhdGEpLmVhY2goZnVuY3Rpb24gKHYsIHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgTGF6eSh2WzBdKS5lYWNoKGZ1bmN0aW9uIChyb3csIGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKChyZXNvdXJjZU5hbWUgaW4gSURCKSAmJiAoaWQgaW4gSURCW3Jlc291cmNlTmFtZV0uc291cmNlKSl7XG4gICAgICAgICAgICAgICAgICAgIElEQltyZXNvdXJjZU5hbWVdLmdldChpZCkuX3Blcm1pc3Npb25zID0gTGF6eShyb3cpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt4LCB0cnVlXVxuICAgICAgICAgICAgICAgICAgICB9KS50b09iamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKExhenkodlswXSkuc2l6ZSgpKXtcbiAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS5lbWl0KCd1cGRhdGUtcGVybWlzc2lvbnMtJyArIHJlc291cmNlTmFtZSwgTGF6eSh2WzBdKS5rZXlzKCkudG9BcnJheSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW1pdCgndXBkYXRlLXBlcm1pc3Npb25zJyk7XG4gICAgfTtcblxuXG4gICAgdGhpcy5nb3RNMk0gPSBmdW5jdGlvbihtMm0pe1xuICAgICAgICBMYXp5KG0ybSkuZWFjaChmdW5jdGlvbihkYXRhLCBpbmRleE5hbWUpe1xuICAgICAgICAgICAgdmFyIG0ybUluZGV4ID0gbGlua2VyLm0ybUluZGV4W2luZGV4TmFtZV07XG4gICAgICAgICAgICBMYXp5KGRhdGEpLmVhY2goZnVuY3Rpb24obSl7XG4gICAgICAgICAgICAgICAgTGF6eShtKS5lYWNoKGZ1bmN0aW9uKGRhdGEsdmVyYil7XG4gICAgICAgICAgICAgICAgICAgIG0ybUluZGV4W3ZlcmJdKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBldmVudHMuZW1pdCgncmVjZWl2ZWQtbTJtJyk7XG4gICAgICAgICAgICBldmVudHMuZW1pdCgncmVjZWl2ZWQtbTJtLScgKyBpbmRleE5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24gKG1vZGVsTmFtZSwgZmlsdGVyLCB0b2dldGhlciwgY2FsbEJhY2spIHsgIC8vXG4gICAgICAgIC8vIGlmIGEgY29ubmVjdGlvbiBpcyBjdXJyZW50bHkgcnVubmluZywgd2FpdCBmb3IgY29ubmVjdGlvbi5cbiAgICAgICAgaWYgKG1vZGVsTmFtZSBpbiB3YWl0aW5nQ29ubmVjdGlvbnMpe1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmZldGNoKG1vZGVsTmFtZSwgZmlsdGVyLCB0b2dldGhlciwgY2FsbEJhY2spO1xuICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZmV0Y2hpbmcgYXN5bmNocm9tb3VzIG1vZGVsIGZyb20gc2VydmVyXG4gICAgICAgICAgICBXMlBSRVNPVVJDRS5kZXNjcmliZShtb2RlbE5hbWUsIGZ1bmN0aW9uKG1vZGVsKXtcbiAgICAgICAgICAgICAgICAvLyBpZiBkYXRhIGNhbWVzIGZyb20gcmVhbHRpbWUgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIGlmIChXMlBSRVNPVVJDRS5jb25uZWN0aW9uLm9wdGlvbnMucmVhbHRpbWVFbmRQb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBnZXR0aW5nIGZpbHRlciBmaWx0ZXJlZCBieSBjYWNoaW5nIHN5c3RlbVxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIgPSBsaXN0Q2FjaGUuZmlsdGVyKG1vZGVsLGZpbHRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc29tdGhpbmcgaXMgbWlzc2luZyBvbiBteSBsb2NhbCBEQiBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhc2sgZm9yIG1pc3NpbmdzIGFuZCBwYXJzZSBzZXJ2ZXIgcmVzcG9uc2UgaW4gb3JkZXIgdG8gZW5yaWNoIG15IGxvY2FsIERCLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGxhY2luZyBsb2NrIGZvciB0aGlzIG1vZGVsXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWl0aW5nQ29ubmVjdGlvbnNbbW9kZWxOYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS4kcG9zdChtb2RlbE5hbWUgKyAnL2xpc3QnLCB7ZmlsdGVyIDogZmlsdGVyfSxmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXMlBSRVNPVVJDRS5nb3REYXRhKGRhdGEsY2FsbEJhY2spXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlIGxvY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgd2FpdGluZ0Nvbm5lY3Rpb25zW21vZGVsTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbGVhc2UgbG9ja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB3YWl0aW5nQ29ubmVjdGlvbnNbbW9kZWxOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHBvc3QobW9kZWxOYW1lICsgJy9saXN0Jywgc2VuZERhdGEsZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHT1RfQUxMLnNvdXJjZS5wdXNoKG1vZGVsTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmdvdERhdGEoZGF0YSwgY2FsbEJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbihtb2RlbE5hbWUsIGlkcywgY2FsbEJhY2spe1xuICAgICAgICAvLyBzZWFyY2ggb2JqZWN0cyBmcm9tIElEQi4gSWYgc29tZSBpZCBpcyBtaXNzaW5nLCBpdCByZXNvbHZlIGl0IGJ5IHRoZSBzZXJ2ZXJcbiAgICAgICAgLy8gaWYgYSByZXF1ZXN0IHRvIHRoZSBzYW1lIG1vZGVsIGlzIHBlbmRpbmcsIHdhaXQgZm9yIGl0cyBjb21wbGV0aW9uXG4gICAgICAgIFxuICAgICAgICBpZiAoaWRzLmNvbnN0cnVjdG9yICE9PSBBcnJheSl7XG4gICAgICAgICAgICBpZHMgPSBbaWRzXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBzb21lIGVudGl0eSBpcyBtaXNzaW5nIFxuICAgICAgICBXMlBSRVNPVVJDRS5mZXRjaChtb2RlbE5hbWUgLCB7aWQ6IGlkc30sIG51bGwsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgICAgIHZhciBpdGFiID0gSURCW21vZGVsTmFtZV1cbiAgICAgICAgICAgIGZvciAodmFyIGlkIGluIGlkcyl7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goaXRhYi5zb3VyY2VbaWRzW2lkXV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbEJhY2socmV0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuZ290TW9kZWwgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBmb3IgKHZhciBtb2RlbE5hbWUgaW4gZGF0YSkge1xuICAgICAgICAgICAgdmFyIG1vZGVsID0gZGF0YVttb2RlbE5hbWVdO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlWydkZXNjcmlwdGlvbjonICsgbW9kZWxOYW1lXSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICAgICAgbW9kZWxDYWNoZVttb2RlbE5hbWVdID0gbWFrZU1vZGVsQ2xhc3MobW9kZWwpO1xuICAgICAgICAgICAgaWYgKCEobW9kZWxOYW1lIGluIElEQikpIHtcbiAgICAgICAgICAgICAgICBJREJbbW9kZWxOYW1lXSA9IExhenkoe30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZGVzY3JpYmUgPSBmdW5jdGlvbihtb2RlbE5hbWUsIGNhbGxCYWNrKXtcbiAgICAgICAgdmFyIHJldCA9IG1vZGVsQ2FjaGVbbW9kZWxOYW1lXTtcbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgICAgY2FsbEJhY2sgJiYgY2FsbEJhY2socmV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghKG1vZGVsTmFtZSBpbiB3YWl0aW5nQ29ubmVjdGlvbnMpKXtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWxOYW1lIGluIGZhaWxlZE1vZGVscyl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2FjaGVLZXkgPSAnZGVzY3JpcHRpb246JyArIG1vZGVsTmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVLZXkgaW4gbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ290TW9kZWwoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbY2FjaGVLZXldKSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxCYWNrICYmIGNhbGxCYWNrKG1vZGVsQ2FjaGVbbW9kZWxOYW1lXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2FpdGluZ0Nvbm5lY3Rpb25zW21vZGVsTmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRwb3N0KG1vZGVsTmFtZSArICcvZGVzY3JpYmUnLG51bGwsIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuZ290TW9kZWwoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsQmFjayAmJiBjYWxsQmFjayhtb2RlbENhY2hlW21vZGVsTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdhaXRpbmdDb25uZWN0aW9uc1ttb2RlbE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm1vZGVsTm90Rm91bmQuaGFuZGxlKG1vZGVsTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRNb2RlbHNbbW9kZWxOYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgVzJQUkVTT1VSQ0UuZGVzY3JpYmUobW9kZWxOYW1lLCBjYWxsQmFjayk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgICAgXG4gICAgfTtcbiAgICB0aGlzLmFkZE1vZGVsSGFuZGxlciA9IGZ1bmN0aW9uIChtb2RlbE5hbWUsIGRlY29yYXRvcikge1xuICAgICAgICB2YXIga2V5ID0gdXRpbHMuaGFzaChkZWNvcmF0b3IpO1xuICAgICAgICBpZiAoIShtb2RlbE5hbWUgaW4gYnVpbGRlckhhbmRsZXJzKSkgYnVpbGRlckhhbmRsZXJzW21vZGVsTmFtZV0gPSBuZXcgSGFuZGxlcigpO1xuICAgICAgICBpZiAoIShtb2RlbE5hbWUgaW4gYnVpbGRlckhhbmRsZXJVc2VkKSkgYnVpbGRlckhhbmRsZXJVc2VkW21vZGVsTmFtZV0gPSB7fTtcbiAgICAgICAgaWYgKGtleSBpbiBidWlsZGVySGFuZGxlclVzZWRbbW9kZWxOYW1lXSl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidWlsZGVySGFuZGxlclVzZWRbbW9kZWxOYW1lXVtrZXldID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9kZWxOYW1lIGluIG1vZGVsQ2FjaGUpIHtcbiAgICAgICAgICAgIGRlY29yYXRvcihtb2RlbENhY2hlW21vZGVsTmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnVpbGRlckhhbmRsZXJzW21vZGVsTmFtZV0uYWRkSGFuZGxlcihkZWNvcmF0b3IpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmFkZFBlcnNpc3RlbnRBdHRyaWJ1dGVzID0gZnVuY3Rpb24obW9kZWxOYW1lLCBhdHRyaWJ1dGVzKXtcbiAgICAgICAgdmFyIGFkZFByb3BlcnR5ID0gZnVuY3Rpb24obW9kZWwsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24odmFsKXtcbiAgICAgICAgICAgIHZhciBrZXkgPSAncEE6JyArIG1vZGVsLm1vZGVsTmFtZSArICc6JyArIHZhbDtcbiAgICAgICAgICAgIHZhciBrYXR0ciA9ICdfXycgKyB2YWw7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kZWwucHJvdG90eXBlLCB2YWwsIHtcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmICghKGthdHRyIGluIHRoaXMpKXtcbiAgICAgICAgICAgICAgICAgIHZhciB2ID0gbG9jYWxTdG9yYWdlW2tleSArIHRoaXMuaWRdO1xuICAgICAgICAgICAgICAgICAgdGhpc1trYXR0cl0gPSB2P0pTT04ucGFyc2Uodik6bnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNba2F0dHJdO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICB0aGlzW2thdHRyXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVtrZXkgKyB0aGlzLmlkXSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghKG1vZGVsTmFtZSBpbiBwZXJzaXN0ZW50QXR0cmlidXRlcykpIHsgcGVyc2lzdGVudEF0dHJpYnV0ZXNbbW9kZWxOYW1lXSA9IFtdOyB9XG4gICAgICAgIHZhciBhdHRycyA9IHBlcnNpc3RlbnRBdHRyaWJ1dGVzW21vZGVsTmFtZV07XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbmV3QXR0cnMgPSBMYXp5KGF0dHJpYnV0ZXMpLmRpZmZlcmVuY2UoYXR0cnMpLnRvQXJyYXkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBuZXdBdHRycyA9IGF0dHJzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdBdHRycy5sZW5ndGgpe1xuICAgICAgICAgICAgaWYgKG1vZGVsTmFtZSBpbiBtb2RlbENhY2hlKXtcbiAgICAgICAgICAgICAgICBhZGRQcm9wZXJ0eShtb2RlbENhY2hlW21vZGVsTmFtZV0sIG5ld0F0dHJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzKXtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhdHRycyxuZXdBdHRycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub24oJ25ldy1tb2RlbCcsIGZ1bmN0aW9uKG1vZGVsKXtcbiAgICAgICAgaWYgKG1vZGVsLm1vZGVsTmFtZSBpbiBidWlsZGVySGFuZGxlcnMpe1xuICAgICAgICAgICAgYnVpbGRlckhhbmRsZXJzW21vZGVsLm1vZGVsTmFtZV0uaGFuZGxlKG1vZGVsQ2FjaGVbbW9kZWwubW9kZWxOYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vZGVsLm1vZGVsTmFtZSBpbiBwZXJzaXN0ZW50QXR0cmlidXRlcyl7XG4gICAgICAgICAgICBXMlBSRVNPVVJDRS5hZGRQZXJzaXN0ZW50QXR0cmlidXRlcyhtb2RlbC5tb2RlbE5hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5jb25uZWN0ID0gZnVuY3Rpb24oY2FsbEJhY2spe1xuICAgICAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCl7XG4gICAgICAgICAgICBjYWxsQmFjayh0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uY29ubmVjdChmdW5jdGlvbihzdGF0dXMpe1xuICAgICAgICAgICAgICAgIFcyUFJFU09VUkNFLmlzQ29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhzdGF0dXMpO1xuICAgICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucXVlcnkgPSBmdW5jdGlvbihtb2RlbE5hbWUsIGZpbHRlciwgdG9nZXRoZXIsIGNhbGxCYWNrKXtcbiAgICAgICAgdmFyIHRocyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZGVzY3JpYmUobW9kZWxOYW1lLGZ1bmN0aW9uKG1vZGVsKXtcbiAgICAgICAgICAgIC8vIGFycmF5Zml5IGFsbCBmaWx0ZXIgdmFsdWVzXG4gICAgICAgICAgICBmaWx0ZXIgPSBMYXp5KGZpbHRlcikubWFwKGZ1bmN0aW9uKHYsayl7IHJldHVybiBbayxBcnJheS5pc0FycmF5KHYpP3Y6W3ZdXX0pLnRvT2JqZWN0KCk7XG4gICAgICAgICAgICB2YXIgZmlsdGVyRnVuY3Rpb24gPSB1dGlscy5tYWtlRmlsdGVyKG1vZGVsLCBmaWx0ZXIpO1xuICAgICAgICAgICAgdmFyIGlkeCA9IGdldEluZGV4KG1vZGVsTmFtZSk7XG4gICAgICAgICAgICB0aHMuZmV0Y2gobW9kZWxOYW1lLGZpbHRlcix0b2dldGhlciwgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgY2FsbEJhY2soaWR4LmZpbHRlcihmaWx0ZXJGdW5jdGlvbikudmFsdWVzKCkudG9BcnJheSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH07XG4gICAgdGhpcy5kZWxldGUgPSBmdW5jdGlvbihtb2RlbE5hbWUsIGlkcywgY2FsbEJhY2spe1xuICAgICAgICByZXR1cm4gdGhpcy4kcG9zdChtb2RlbE5hbWUgKyAnL2RlbGV0ZScsIHsgaWQgOiBpZHN9LCBjYWxsQmFjayk7XG4gICAgfTtcbn07XG5cbmZ1bmN0aW9uIHJlV2hlZWxPUk0oZW5kUG9pbnQsIGxvZ2luRnVuYyl7XG4gICAgdGhpcy4kb3JtID0gbmV3IGJhc2VPUk0obmV3IHV0aWxzLnJlV2hlZWxDb25uZWN0aW9uKGVuZFBvaW50LCBsb2dpbkZ1bmMpLHRoaXMpO1xuICAgIHRoaXMub24gPSB0aGlzLiRvcm0ub24uYmluZCh0aGlzLiRvcm0pO1xuICAgIHRoaXMuZW1pdCA9IHRoaXMuJG9ybS5lbWl0LmJpbmQodGhpcy4kb3JtKTtcbiAgICB0aGlzLnVuYmluZCA9IHRoaXMuJG9ybS51bmJpbmQuYmluZCh0aGlzLiRvcm0pO1xuICAgIHRoaXMuYWRkTW9kZWxIYW5kbGVyID0gdGhpcy4kb3JtLmFkZE1vZGVsSGFuZGxlci5iaW5kKHRoaXMuJG9ybSk7XG4gICAgdGhpcy5hZGRQZXJzaXN0ZW50QXR0cmlidXRlcyA9IHRoaXMuJG9ybS5hZGRQZXJzaXN0ZW50QXR0cmlidXRlcy5iaW5kKHRoaXMuJG9ybSk7XG4gICAgdGhpcy51dGlscyA9IHV0aWxzO1xufVxuXG5yZVdoZWVsT1JNLnByb3RvdHlwZS5nZXRNb2RlbCA9IGZ1bmN0aW9uKG1vZGVsTmFtZSl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhY2NlcHQsIHJlamVjdCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLiRvcm0uY29ubmVjdChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNlbGYuJG9ybS5kZXNjcmliZShtb2RlbE5hbWUsYWNjZXB0KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxucmVXaGVlbE9STS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obW9kZWxOYW1lLCBpZHMpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc2luZ2xlID0gZmFsc2U7XG4gICAgdmFyIG1vZE5hbWUgPSBtb2RlbE5hbWU7XG4gICAgaWYgKGlkcy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpe1xuICAgICAgICBzaW5nbGUgPSB0cnVlO1xuICAgICAgICBpZHMgPSBbaWRzXVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3Qpe1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBzZWxmLiRvcm0uY29ubmVjdChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGlmIChzaW5nbGUpe1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRvcm0uZ2V0KG1vZE5hbWUsIGlkcywgZnVuY3Rpb24oaXRlbXMpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdChpdGVtc1swXSk7fVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJG9ybS5nZXQobW9kTmFtZSwgaWRzLCBhY2NlcHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxucmVXaGVlbE9STS5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBmaWx0ZXIsIHJlbGF0ZWQpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3Qpe1xuICAgICAgICB2YXIgdG9nZXRoZXIgPSBudWxsO1xuICAgICAgICBpZiAocmVsYXRlZCAmJiAocmVsYXRlZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpICYmIChyZWxhdGVkLmxlbmd0aCkpe1xuICAgICAgICAgICAgdG9nZXRoZXIgPSByZWxhdGVkO1xuICAgICAgICB9IGVsc2UgaWYgKHJlbGF0ZWQgJiYgKHJlbGF0ZWQuY29uc3RydWN0b3IgPT09IFN0cmluZykgJiYgKHJlbGF0ZWQubGVuZ3RoKSl7XG4gICAgICAgICAgICB0b2dldGhlciA9IHJlbGF0ZWQuc3BsaXQoJywnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnl7XG4gICAgICAgICAgICBpZiAoc2VsZi4kb3JtLmlzQ29ubmVjdGVkKXtcbiAgICAgICAgICAgICAgICBzZWxmLiRvcm0ucXVlcnkobW9kZWxOYW1lLCBmaWx0ZXIsIHRvZ2V0aGVyLCBhY2NlcHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLiRvcm0uY29ubmVjdChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRvcm0ucXVlcnkobW9kZWxOYW1lLCBmaWx0ZXIsIHRvZ2V0aGVyLCBhY2NlcHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pXG59O1xuXG5yZVdoZWVsT1JNLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBpZHMpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYWNjZXB0LCByZWplY3Qpe1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBpZiAoc2VsZi4kb3JtLmNvbm5lY3RlZCl7XG4gICAgICAgICAgICAgICAgc2VsZi4kb3JtLmRlbGV0ZShtb2RlbE5hbWUsIGlkcywgYWNjZXB0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi4kb3JtLmNvbm5lY3QoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kb3JtLmRlbGV0ZShtb2RlbE5hbWUsIGlkcywgYWNjZXB0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KVxufTtcblxuXG4iXX0=
